(function(B,se){typeof exports=="object"&&typeof module<"u"?se(require("yargs"),require("util"),require("path"),require("fs"),require("assert"),require("url"),require("node:fs/promises"),require("node:path"),require("@vue/compiler-sfc")):typeof define=="function"&&define.amd?define(["yargs","util","path","fs","assert","url","node:fs/promises","node:path","@vue/compiler-sfc"],se):(B=typeof globalThis<"u"?globalThis:B||self,se(B.yargs,B.util,B.path,B.fs,B.assert,B.url,B["node:fs/promises"],B["node:path"],B.compilerSfc))})(this,function(B,se,M,oe,yt,rn,me,xe,cn){"use strict";var Et=typeof document<"u"?document.currentScript:null;class ae extends Error{constructor(t){super(t||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,ae)}}function vt(){return an()?0:1}function an(){return ln()&&!process.defaultApp}function ln(){return!!process.versions.electron}function un(e){return e.slice(vt()+1)}function fn(){return process.argv[vt()]}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function le(e){if(e!==e.toLowerCase()&&e!==e.toUpperCase()||(e=e.toLowerCase()),e.indexOf("-")===-1&&e.indexOf("_")===-1)return e;{let n="",s=!1;const o=e.match(/^-+/);for(let r=o?o[0].length:0;r<e.length;r++){let u=e.charAt(r);s&&(s=!1,u=u.toUpperCase()),r!==0&&(u==="-"||u==="_")?s=!0:u!=="-"&&u!=="_"&&(n+=u)}return n}}function wt(e,t){const n=e.toLowerCase();t=t||"-";let s="";for(let o=0;o<e.length;o++){const r=n.charAt(o),u=e.charAt(o);r!==u&&o>0?s+=`${t}${n.charAt(o)}`:s+=u}return s}function Ot(e){return e==null?!1:typeof e=="number"||/^0x[0-9a-f]+$/i.test(e)?!0:/^0[^.]/.test(e)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function hn(e){if(Array.isArray(e))return e.map(u=>typeof u!="string"?u+"":u);e=e.trim();let t=0,n=null,s=null,o=null;const r=[];for(let u=0;u<e.length;u++){if(n=s,s=e.charAt(u),s===" "&&!o){n!==" "&&t++;continue}s===o?o=null:(s==="'"||s==='"')&&!o&&(o=s),r[t]||(r[t]=""),r[t]+=s}return r}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var K;(function(e){e.BOOLEAN="boolean",e.STRING="string",e.NUMBER="number",e.ARRAY="array"})(K||(K={}));/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */let ee;class pn{constructor(t){ee=t}parse(t,n){const s=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},n),o=hn(t),r=typeof t=="string",u=dn(Object.assign(Object.create(null),s.alias)),h=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},s.configuration),g=Object.assign(Object.create(null),s.default),v=s.configObjects||[],A=s.envPrefix,_=h["populate--"],F=_?"--":"_",X=Object.create(null),Jt=Object.create(null),ie=s.__||ee.format,f={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},J=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,mt=new RegExp("^--"+h["negation-prefix"]+"(.+)");[].concat(s.array||[]).filter(Boolean).forEach(function(i){const a=typeof i=="object"?i.key:i,p=Object.keys(i).map(function(l){return{boolean:"bools",string:"strings",number:"numbers"}[l]}).filter(Boolean).pop();p&&(f[p][a]=!0),f.arrays[a]=!0,f.keys.push(a)}),[].concat(s.boolean||[]).filter(Boolean).forEach(function(i){f.bools[i]=!0,f.keys.push(i)}),[].concat(s.string||[]).filter(Boolean).forEach(function(i){f.strings[i]=!0,f.keys.push(i)}),[].concat(s.number||[]).filter(Boolean).forEach(function(i){f.numbers[i]=!0,f.keys.push(i)}),[].concat(s.count||[]).filter(Boolean).forEach(function(i){f.counts[i]=!0,f.keys.push(i)}),[].concat(s.normalize||[]).filter(Boolean).forEach(function(i){f.normalize[i]=!0,f.keys.push(i)}),typeof s.narg=="object"&&Object.entries(s.narg).forEach(([i,a])=>{typeof a=="number"&&(f.nargs[i]=a,f.keys.push(i))}),typeof s.coerce=="object"&&Object.entries(s.coerce).forEach(([i,a])=>{typeof a=="function"&&(f.coercions[i]=a,f.keys.push(i))}),typeof s.config<"u"&&(Array.isArray(s.config)||typeof s.config=="string"?[].concat(s.config).filter(Boolean).forEach(function(i){f.configs[i]=!0}):typeof s.config=="object"&&Object.entries(s.config).forEach(([i,a])=>{(typeof a=="boolean"||typeof a=="function")&&(f.configs[i]=a)})),Fo(s.key,u,s.default,f.arrays),Object.keys(g).forEach(function(i){(f.aliases[i]||[]).forEach(function(a){g[a]=g[i]})});let Q=null;Mo();let ve=[];const T=Object.assign(Object.create(null),{_:[]}),en={};for(let i=0;i<o.length;i++){const a=o[i],p=a.replace(/^-{3,}/,"---");let l,c,$,m,y,P;if(a!=="--"&&/^-/.test(a)&&Se(a))gt(a);else if(p.match(/^---+(=|$)/)){gt(a);continue}else if(a.match(/^--.+=/)||!h["short-option-groups"]&&a.match(/^-.+=/))m=a.match(/^--?([^=]+)=([\s\S]*)$/),m!==null&&Array.isArray(m)&&m.length>=3&&(w(m[1],f.arrays)?i=Oe(i,m[1],o,m[2]):w(m[1],f.nargs)!==!1?i=we(i,m[1],o,m[2]):R(m[1],m[2],!0));else if(a.match(mt)&&h["boolean-negation"])m=a.match(mt),m!==null&&Array.isArray(m)&&m.length>=2&&(c=m[1],R(c,w(c,f.arrays)?[!1]:!1));else if(a.match(/^--.+/)||!h["short-option-groups"]&&a.match(/^-[^-]+/))m=a.match(/^--?(.+)/),m!==null&&Array.isArray(m)&&m.length>=2&&(c=m[1],w(c,f.arrays)?i=Oe(i,c,o):w(c,f.nargs)!==!1?i=we(i,c,o):(y=o[i+1],y!==void 0&&(!y.match(/^-/)||y.match(J))&&!w(c,f.bools)&&!w(c,f.counts)||/^(true|false)$/.test(y)?(R(c,y),i++):R(c,ce(c))));else if(a.match(/^-.\..+=/))m=a.match(/^-([^=]+)=([\s\S]*)$/),m!==null&&Array.isArray(m)&&m.length>=3&&R(m[1],m[2]);else if(a.match(/^-.\..+/)&&!a.match(J))y=o[i+1],m=a.match(/^-(.\..+)/),m!==null&&Array.isArray(m)&&m.length>=2&&(c=m[1],y!==void 0&&!y.match(/^-/)&&!w(c,f.bools)&&!w(c,f.counts)?(R(c,y),i++):R(c,ce(c)));else if(a.match(/^-[^-]+/)&&!a.match(J)){$=a.slice(1,-1).split(""),l=!1;for(let I=0;I<$.length;I++){if(y=a.slice(I+2),$[I+1]&&$[I+1]==="="){P=a.slice(I+3),c=$[I],w(c,f.arrays)?i=Oe(i,c,o,P):w(c,f.nargs)!==!1?i=we(i,c,o,P):R(c,P),l=!0;break}if(y==="-"){R($[I],y);continue}if(/[A-Za-z]/.test($[I])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(y)&&w(y,f.bools)===!1){R($[I],y),l=!0;break}if($[I+1]&&$[I+1].match(/\W/)){R($[I],y),l=!0;break}else R($[I],ce($[I]))}c=a.slice(-1)[0],!l&&c!=="-"&&(w(c,f.arrays)?i=Oe(i,c,o):w(c,f.nargs)!==!1?i=we(i,c,o):(y=o[i+1],y!==void 0&&(!/^(-|--)[^-]/.test(y)||y.match(J))&&!w(c,f.bools)&&!w(c,f.counts)||/^(true|false)$/.test(y)?(R(c,y),i++):R(c,ce(c))))}else if(a.match(/^-[0-9]$/)&&a.match(J)&&w(a.slice(1),f.bools))c=a.slice(1),R(c,ce(c));else if(a==="--"){ve=o.slice(i+1);break}else if(h["halt-at-non-option"]){ve=o.slice(i);break}else gt(a)}nn(T,!0),nn(T,!1),No(T),Ro(),sn(T,f.aliases,g,!0),Lo(T),h["set-placeholder-key"]&&jo(T),Object.keys(f.counts).forEach(function(i){pe(T,i.split("."))||R(i,0)}),_&&ve.length&&(T[F]=[]),ve.forEach(function(i){T[F].push(i)}),h["camel-case-expansion"]&&h["strip-dashed"]&&Object.keys(T).filter(i=>i!=="--"&&i.includes("-")).forEach(i=>{delete T[i]}),h["strip-aliased"]&&[].concat(...Object.keys(u).map(i=>u[i])).forEach(i=>{h["camel-case-expansion"]&&i.includes("-")&&delete T[i.split(".").map(a=>le(a)).join(".")],delete T[i]});function gt(i){const a=Ae("_",i);(typeof a=="string"||typeof a=="number")&&T._.push(a)}function we(i,a,p,l){let c,$=w(a,f.nargs);if($=typeof $!="number"||isNaN($)?1:$,$===0)return te(l)||(Q=Error(ie("Argument unexpected for: %s",a))),R(a,ce(a)),i;let m=te(l)?0:1;if(h["nargs-eats-options"])p.length-(i+1)+m<$&&(Q=Error(ie("Not enough arguments following: %s",a))),m=$;else{for(c=i+1;c<p.length&&(!p[c].match(/^-[^0-9]/)||p[c].match(J)||Se(p[c]));c++)m++;m<$&&(Q=Error(ie("Not enough arguments following: %s",a)))}let y=Math.min(m,$);for(!te(l)&&y>0&&(R(a,l),y--),c=i+1;c<y+i+1;c++)R(a,p[c]);return i+y}function Oe(i,a,p,l){let c=[],$=l||p[i+1];const m=w(a,f.nargs);if(w(a,f.bools)&&!/^(true|false)$/.test($))c.push(!0);else if(te($)||te(l)&&/^-/.test($)&&!J.test($)&&!Se($)){if(g[a]!==void 0){const y=g[a];c=Array.isArray(y)?y:[y]}}else{te(l)||c.push($t(a,l,!0));for(let y=i+1;y<p.length&&!(!h["greedy-arrays"]&&c.length>0||m&&typeof m=="number"&&c.length>=m||($=p[y],/^-/.test($)&&!J.test($)&&!Se($)));y++)i=y,c.push($t(a,$,r))}return typeof m=="number"&&(m&&c.length<m||isNaN(m)&&c.length===0)&&(Q=Error(ie("Not enough arguments following: %s",a))),R(a,c),i}function R(i,a,p=r){if(/-/.test(i)&&h["camel-case-expansion"]){const $=i.split(".").map(function(m){return le(m)}).join(".");tn(i,$)}const l=$t(i,a,p),c=i.split(".");de(T,c,l),f.aliases[i]&&f.aliases[i].forEach(function($){const m=$.split(".");de(T,m,l)}),c.length>1&&h["dot-notation"]&&(f.aliases[c[0]]||[]).forEach(function($){let m=$.split(".");const y=[].concat(c);y.shift(),m=m.concat(y),(f.aliases[i]||[]).includes(m.join("."))||de(T,m,l)}),w(i,f.normalize)&&!w(i,f.arrays)&&[i].concat(f.aliases[i]||[]).forEach(function(m){Object.defineProperty(en,m,{enumerable:!0,get(){return a},set(y){a=typeof y=="string"?ee.normalize(y):y}})})}function tn(i,a){f.aliases[i]&&f.aliases[i].length||(f.aliases[i]=[a],X[a]=!0),f.aliases[a]&&f.aliases[a].length||tn(a,i)}function $t(i,a,p){p&&(a=mn(a)),(w(i,f.bools)||w(i,f.counts))&&typeof a=="string"&&(a=a==="true");let l=Array.isArray(a)?a.map(function(c){return Ae(i,c)}):Ae(i,a);return w(i,f.counts)&&(te(l)||typeof l=="boolean")&&(l=Ce()),w(i,f.normalize)&&w(i,f.arrays)&&(Array.isArray(a)?l=a.map(c=>ee.normalize(c)):l=ee.normalize(a)),l}function Ae(i,a){return!h["parse-positional-numbers"]&&i==="_"||!w(i,f.strings)&&!w(i,f.bools)&&!Array.isArray(a)&&(Ot(a)&&h["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${a}`)))||!te(a)&&w(i,f.numbers))&&(a=Number(a)),a}function No(i){const a=Object.create(null);sn(a,f.aliases,g),Object.keys(f.configs).forEach(function(p){const l=i[p]||a[p];if(l)try{let c=null;const $=ee.resolve(ee.cwd(),l),m=f.configs[p];if(typeof m=="function"){try{c=m($)}catch(y){c=y}if(c instanceof Error){Q=c;return}}else c=ee.require($);bt(c)}catch(c){c.name==="PermissionDenied"?Q=c:i[p]&&(Q=Error(ie("Invalid JSON config file: %s",l)))}})}function bt(i,a){Object.keys(i).forEach(function(p){const l=i[p],c=a?a+"."+p:p;typeof l=="object"&&l!==null&&!Array.isArray(l)&&h["dot-notation"]?bt(l,c):(!pe(T,c.split("."))||w(c,f.arrays)&&h["combine-arrays"])&&R(c,l)})}function Ro(){typeof v<"u"&&v.forEach(function(i){bt(i)})}function nn(i,a){if(typeof A>"u")return;const p=typeof A=="string"?A:"",l=ee.env();Object.keys(l).forEach(function(c){if(p===""||c.lastIndexOf(p,0)===0){const $=c.split("__").map(function(m,y){return y===0&&(m=m.substring(p.length)),le(m)});(a&&f.configs[$.join(".")]||!a)&&!pe(i,$)&&R($.join("."),l[c])}})}function Lo(i){let a;const p=new Set;Object.keys(i).forEach(function(l){if(!p.has(l)&&(a=w(l,f.coercions),typeof a=="function"))try{const c=Ae(l,a(i[l]));[].concat(f.aliases[l]||[],l).forEach($=>{p.add($),i[$]=c})}catch(c){Q=c}})}function jo(i){return f.keys.forEach(a=>{~a.indexOf(".")||typeof i[a]>"u"&&(i[a]=void 0)}),i}function sn(i,a,p,l=!1){Object.keys(p).forEach(function(c){pe(i,c.split("."))||(de(i,c.split("."),p[c]),l&&(Jt[c]=!0),(a[c]||[]).forEach(function($){pe(i,$.split("."))||de(i,$.split("."),p[c])}))})}function pe(i,a){let p=i;h["dot-notation"]||(a=[a.join(".")]),a.slice(0,-1).forEach(function(c){p=p[c]||{}});const l=a[a.length-1];return typeof p!="object"?!1:l in p}function de(i,a,p){let l=i;h["dot-notation"]||(a=[a.join(".")]),a.slice(0,-1).forEach(function(P){P=At(P),typeof l=="object"&&l[P]===void 0&&(l[P]={}),typeof l[P]!="object"||Array.isArray(l[P])?(Array.isArray(l[P])?l[P].push({}):l[P]=[l[P],{}],l=l[P][l[P].length-1]):l=l[P]});const c=At(a[a.length-1]),$=w(a.join("."),f.arrays),m=Array.isArray(p);let y=h["duplicate-arguments-array"];!y&&w(c,f.nargs)&&(y=!0,(!te(l[c])&&f.nargs[c]===1||Array.isArray(l[c])&&l[c].length===f.nargs[c])&&(l[c]=void 0)),p===Ce()?l[c]=Ce(l[c]):Array.isArray(l[c])?y&&$&&m?l[c]=h["flatten-duplicate-arrays"]?l[c].concat(p):(Array.isArray(l[c][0])?l[c]:[l[c]]).concat([p]):!y&&!!$==!!m?l[c]=p:l[c]=l[c].concat([p]):l[c]===void 0&&$?l[c]=m?p:[p]:y&&!(l[c]===void 0||w(c,f.counts)||w(c,f.bools))?l[c]=[l[c],p]:l[c]=p}function Fo(...i){i.forEach(function(a){Object.keys(a||{}).forEach(function(p){f.aliases[p]||(f.aliases[p]=[].concat(u[p]||[]),f.aliases[p].concat(p).forEach(function(l){if(/-/.test(l)&&h["camel-case-expansion"]){const c=le(l);c!==p&&f.aliases[p].indexOf(c)===-1&&(f.aliases[p].push(c),X[c]=!0)}}),f.aliases[p].concat(p).forEach(function(l){if(l.length>1&&/[A-Z]/.test(l)&&h["camel-case-expansion"]){const c=wt(l,"-");c!==p&&f.aliases[p].indexOf(c)===-1&&(f.aliases[p].push(c),X[c]=!0)}}),f.aliases[p].forEach(function(l){f.aliases[l]=[p].concat(f.aliases[p].filter(function(c){return l!==c}))}))})})}function w(i,a){const p=[].concat(f.aliases[i]||[],i),l=Object.keys(a),c=p.find($=>l.includes($));return c?a[c]:!1}function on(i){const a=Object.keys(f);return[].concat(a.map(l=>f[l])).some(function(l){return Array.isArray(l)?l.includes(i):l[i]})}function To(i,...a){return[].concat(...a).some(function(l){const c=i.match(l);return c&&on(c[1])})}function Po(i){if(i.match(J)||!i.match(/^-[^-]+/))return!1;let a=!0,p;const l=i.slice(1).split("");for(let c=0;c<l.length;c++){if(p=i.slice(c+2),!on(l[c])){a=!1;break}if(l[c+1]&&l[c+1]==="="||p==="-"||/[A-Za-z]/.test(l[c])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(p)||l[c+1]&&l[c+1].match(/\W/))break}return a}function Se(i){return h["unknown-options-as-args"]&&Wo(i)}function Wo(i){return i=i.replace(/^-{3,}/,"--"),i.match(J)||Po(i)?!1:!To(i,/^-+([^=]+?)=[\s\S]*$/,mt,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function ce(i){return!w(i,f.bools)&&!w(i,f.counts)&&`${i}`in g?g[i]:Io(Bo(i))}function Io(i){return{[K.BOOLEAN]:!0,[K.STRING]:"",[K.NUMBER]:void 0,[K.ARRAY]:[]}[i]}function Bo(i){let a=K.BOOLEAN;return w(i,f.strings)?a=K.STRING:w(i,f.numbers)?a=K.NUMBER:w(i,f.bools)?a=K.BOOLEAN:w(i,f.arrays)&&(a=K.ARRAY),a}function te(i){return i===void 0}function Mo(){Object.keys(f.counts).find(i=>w(i,f.arrays)?(Q=Error(ie("Invalid configuration: %s, opts.count excludes opts.array.",i)),!0):w(i,f.nargs)?(Q=Error(ie("Invalid configuration: %s, opts.count excludes opts.narg.",i)),!0):!1)}return{aliases:Object.assign({},f.aliases),argv:Object.assign(en,T),configuration:h,defaulted:Object.assign({},Jt),error:Q,newAliases:Object.assign({},X)}}}function dn(e){const t=[],n=Object.create(null);let s=!0;for(Object.keys(e).forEach(function(o){t.push([].concat(e[o],o))});s;){s=!1;for(let o=0;o<t.length;o++)for(let r=o+1;r<t.length;r++)if(t[o].filter(function(h){return t[r].indexOf(h)!==-1}).length){t[o]=t[o].concat(t[r]),t.splice(r,1),s=!0;break}}return t.forEach(function(o){o=o.filter(function(u,h,g){return g.indexOf(u)===h});const r=o.pop();r!==void 0&&typeof r=="string"&&(n[r]=o)}),n}function Ce(e){return e!==void 0?e+1:1}function At(e){return e==="__proto__"?"___proto___":e}function mn(e){return typeof e=="string"&&(e[0]==="'"||e[0]==='"')&&e[e.length-1]===e[0]?e.substring(1,e.length-1):e}/**
 * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
 * CJS and ESM environments.
 *
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var _e,Ne,Re;const St=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,xt=(Ne=(_e=process==null?void 0:process.versions)===null||_e===void 0?void 0:_e.node)!==null&&Ne!==void 0?Ne:(Re=process==null?void 0:process.version)===null||Re===void 0?void 0:Re.slice(1);if(xt&&Number(xt.match(/^([^.]+)/)[1])<St)throw Error(`yargs parser supports a minimum Node.js version of ${St}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);const gn=process?process.env:{},Ct=new pn({cwd:process.cwd,env:()=>gn,format:se.format,normalize:M.normalize,resolve:M.resolve,require:e=>{if(typeof require<"u")return require(e);if(e.match(/\.json$/))return JSON.parse(oe.readFileSync(e,"utf8"));throw Error("only .json config files are supported in ESM")}}),ue=function(t,n){return Ct.parse(t.slice(),n).argv};ue.detailed=function(e,t){return Ct.parse(e.slice(),t)},ue.camelCase=le,ue.decamelize=wt,ue.looksLikeNumber=Ot;const $n={right:On,center:An},bn=0,ge=1,yn=2,$e=3;class En{constructor(t){var n;this.width=t.width,this.wrap=(n=t.wrap)!==null&&n!==void 0?n:!0,this.rows=[]}span(...t){const n=this.div(...t);n.span=!0}resetOutput(){this.rows=[]}div(...t){if(t.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...t)&&typeof t[0]=="string")return this.applyLayoutDSL(t[0]);const n=t.map(s=>typeof s=="string"?this.colFromString(s):s);return this.rows.push(n),n}shouldApplyLayoutDSL(...t){return t.length===1&&typeof t[0]=="string"&&/[\t\n]/.test(t[0])}applyLayoutDSL(t){const n=t.split(`
`).map(o=>o.split("	"));let s=0;return n.forEach(o=>{o.length>1&&k.stringWidth(o[0])>s&&(s=Math.min(Math.floor(this.width*.5),k.stringWidth(o[0])))}),n.forEach(o=>{this.div(...o.map((r,u)=>({text:r.trim(),padding:this.measurePadding(r),width:u===0&&o.length>1?s:void 0})))}),this.rows[this.rows.length-1]}colFromString(t){return{text:t,padding:this.measurePadding(t)}}measurePadding(t){const n=k.stripAnsi(t);return[0,n.match(/\s*$/)[0].length,0,n.match(/^\s*/)[0].length]}toString(){const t=[];return this.rows.forEach(n=>{this.rowToString(n,t)}),t.filter(n=>!n.hidden).map(n=>n.text).join(`
`)}rowToString(t,n){return this.rasterize(t).forEach((s,o)=>{let r="";s.forEach((u,h)=>{const{width:g}=t[h],v=this.negatePadding(t[h]);let A=u;if(v>k.stringWidth(u)&&(A+=" ".repeat(v-k.stringWidth(u))),t[h].align&&t[h].align!=="left"&&this.wrap){const F=$n[t[h].align];A=F(A,v),k.stringWidth(A)<v&&(A+=" ".repeat((g||0)-k.stringWidth(A)-1))}const _=t[h].padding||[0,0,0,0];_[$e]&&(r+=" ".repeat(_[$e])),r+=_t(t[h],A,"| "),r+=A,r+=_t(t[h],A," |"),_[ge]&&(r+=" ".repeat(_[ge])),o===0&&n.length>0&&(r=this.renderInline(r,n[n.length-1]))}),n.push({text:r.replace(/ +$/,""),span:t.span})}),n}renderInline(t,n){const s=t.match(/^ */),o=s?s[0].length:0,r=n.text,u=k.stringWidth(r.trimRight());return n.span?this.wrap?o<u?t:(n.hidden=!0,r.trimRight()+" ".repeat(o-u)+t.trimLeft()):(n.hidden=!0,r+t):t}rasterize(t){const n=[],s=this.columnWidths(t);let o;return t.forEach((r,u)=>{r.width=s[u],this.wrap?o=k.wrap(r.text,this.negatePadding(r),{hard:!0}).split(`
`):o=r.text.split(`
`),r.border&&(o.unshift("."+"-".repeat(this.negatePadding(r)+2)+"."),o.push("'"+"-".repeat(this.negatePadding(r)+2)+"'")),r.padding&&(o.unshift(...new Array(r.padding[bn]||0).fill("")),o.push(...new Array(r.padding[yn]||0).fill(""))),o.forEach((h,g)=>{n[g]||n.push([]);const v=n[g];for(let A=0;A<u;A++)v[A]===void 0&&v.push("");v.push(h)})}),n}negatePadding(t){let n=t.width||0;return t.padding&&(n-=(t.padding[$e]||0)+(t.padding[ge]||0)),t.border&&(n-=4),n}columnWidths(t){if(!this.wrap)return t.map(u=>u.width||k.stringWidth(u.text));let n=t.length,s=this.width;const o=t.map(u=>{if(u.width)return n--,s-=u.width,u.width}),r=n?Math.floor(s/n):0;return o.map((u,h)=>u===void 0?Math.max(r,vn(t[h])):u)}}function _t(e,t,n){return e.border?/[.']-+[.']/.test(t)?"":t.trim().length!==0?n:"  ":""}function vn(e){const t=e.padding||[],n=1+(t[$e]||0)+(t[ge]||0);return e.border?n+4:n}function wn(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}function On(e,t){e=e.trim();const n=k.stringWidth(e);return n<t?" ".repeat(t-n)+e:e}function An(e,t){e=e.trim();const n=k.stringWidth(e);return n>=t?e:" ".repeat(t-n>>1)+e}let k;function Sn(e,t){return k=t,new En({width:e?.width||wn(),wrap:e?.wrap})}const Nt=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function Rt(e){return e.replace(Nt,"")}function xn(e,t){const[n,s]=e.match(Nt)||["",""];e=Rt(e);let o="";for(let r=0;r<e.length;r++)r!==0&&r%t===0&&(o+=`
`),o+=e.charAt(r);return n&&s&&(o=`${n}${o}${s}`),o}function Cn(e){return Sn(e,{stringWidth:t=>[...t].length,stripAnsi:Rt,wrap:xn})}function _n(e,t){let n=M.resolve(".",e),s;for(oe.statSync(n).isDirectory()||(n=M.dirname(n));;){if(s=t(n,oe.readdirSync(n)),s)return M.resolve(n,s);if(n=M.dirname(s=n),s===n)break}}const Nn={fs:{readFileSync:oe.readFileSync,writeFile:oe.writeFile},format:se.format,resolve:M.resolve,exists:e=>{try{return oe.statSync(e).isFile()}catch{return!1}}};let Z;class Rn{constructor(t){t=t||{},this.directory=t.directory||"./locales",this.updateFiles=typeof t.updateFiles=="boolean"?t.updateFiles:!0,this.locale=t.locale||"en",this.fallbackToLanguage=typeof t.fallbackToLanguage=="boolean"?t.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...t){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);const n=t.shift();let s=function(){};return typeof t[t.length-1]=="function"&&(s=t.pop()),s=s||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]=n,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:s})):s(),Z.format.apply(Z.format,[this.cache[this.locale][n]||n].concat(t))}__n(){const t=Array.prototype.slice.call(arguments),n=t.shift(),s=t.shift(),o=t.shift();let r=function(){};typeof t[t.length-1]=="function"&&(r=t.pop()),this.cache[this.locale]||this._readLocaleFile();let u=o===1?n:s;this.cache[this.locale][n]&&(u=this.cache[this.locale][n][o===1?"one":"other"]),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]={one:n,other:s},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:r})):r();const h=[u];return~u.indexOf("%d")&&h.push(o),Z.format.apply(Z.format,h.concat(t))}setLocale(t){this.locale=t}getLocale(){return this.locale}updateLocale(t){this.cache[this.locale]||this._readLocaleFile();for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this.cache[this.locale][n]=t[n])}_taggedLiteral(t,...n){let s="";return t.forEach(function(o,r){const u=n[r+1];s+=o,typeof u<"u"&&(s+="%s")}),this.__.apply(this,[s].concat([].slice.call(n,1)))}_enqueueWrite(t){this.writeQueue.push(t),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){const t=this,n=this.writeQueue[0],s=n.directory,o=n.locale,r=n.cb,u=this._resolveLocaleFile(s,o),h=JSON.stringify(this.cache[o],null,2);Z.fs.writeFile(u,h,"utf-8",function(g){t.writeQueue.shift(),t.writeQueue.length>0&&t._processWriteQueue(),r(g)})}_readLocaleFile(){let t={};const n=this._resolveLocaleFile(this.directory,this.locale);try{Z.fs.readFileSync&&(t=JSON.parse(Z.fs.readFileSync(n,"utf-8")))}catch(s){if(s instanceof SyntaxError&&(s.message="syntax error in "+n),s.code==="ENOENT")t={};else throw s}this.cache[this.locale]=t}_resolveLocaleFile(t,n){let s=Z.resolve(t,"./",n+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(s)&&~n.lastIndexOf("_")){const o=Z.resolve(t,"./",n.split("_")[0]+".json");this._fileExistsSync(o)&&(s=o)}return s}_fileExistsSync(t){return Z.exists(t)}}function Ln(e,t){Z=t;const n=new Rn(e);return{__:n.__.bind(n),__n:n.__n.bind(n),setLocale:n.setLocale.bind(n),getLocale:n.getLocale.bind(n),updateLocale:n.updateLocale.bind(n),locale:n.locale}}const jn=e=>Ln(e,Nn),Fn="require is not supported by ESM",Lt="loading a directory of commands is not supported yet for ESM";let fe;try{fe=rn.fileURLToPath(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:Et&&Et.src||new URL("vue-mess-detector.umd.js",document.baseURI).href)}catch{fe=process.cwd()}const Tn=fe.substring(0,fe.lastIndexOf("node_modules"));yt.notStrictEqual,yt.strictEqual,se.inspect,Tn||process.cwd(),M.basename,M.dirname,M.extname,M.relative,M.resolve,process.cwd,process.exit,process.nextTick,typeof process.stdout.columns<"u"&&process.stdout.columns,oe.readFileSync,jn({directory:M.resolve(fe,"../../../locales"),updateFiles:!1});const U="\x1B[44m",S="\x1B[43m",H="\x1B[41m",jt="\x1B[42m",b="\x1B[0m",O="\x1B[33m",x="\x1B[36m",d="\x1B[0m",re=Object.keys({"vue-caution":["elementSelectorsWithScoped","implicitParentChildCommunication"],"vue-essential":["globalStyle","simpleProp","singleNameComponent","vforNoKey","vifWithVfor"],"vue-recommended":["elementAttributeOrder","topLevelElementOrder"],"vue-strong":["componentFilenameCasing","componentFiles","directiveShorthands","fullWordComponentName","multiAttributeElements","propNameCasing","quotedAttributeValues","selfClosingComponents","simpleComputed","templateSimpleExpression"],rrd:["cyclomaticComplexity","deepIndentation","elseCondition","functionSize","htmlLink","ifWithoutCurlyBraces","magicNumbers","nestedTernary","noPropDestructure","parameterCount","plainScript","propsDrilling","scriptLength","shortVariableName","tooManyProps","vForWithIndexKey","zeroLengthComparison"]}),Le=[],je=100,Pn=(e,t)=>{if(!e)return;const n=e.content.split(`
`);n.length>je&&Le.push({filePath:t,message:`${n.length>je*2?H:S}(${n.length} lines)${b}`})},Wn=()=>{const e=[];return Le.length>0&&Le.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ Long <script> blocks${d}`,description:`ðŸ‘‰ ${O}Try to refactor out the logic into composable functions or other files and keep the script block's length under ${je} lines.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/script-length.html`,message:`${t.message} ðŸš¨`})}),e},Fe=[],In=(e,t)=>{!e||e.setup||Fe.push({filePath:t,message:`${S}Plain <script> block${b} found`})},Bn=()=>{const e=[];return Fe.length>0&&Fe.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ Plain <script> blocks${d}`,description:`ðŸ‘‰ ${O} Consider using <script setup> to leverage the new SFC <script> syntax.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/plain-script.html`,message:`${t.message} ðŸš¨`})}),e},Mn=/^(\(.*\)|\\?.)$/;function ne(e){const t=e.toString();return Mn.test(t)?t:`(?:${t})`}const kn=/^(?:\(\?:(.+)\)|(\(?.+\)?))$/,zn=/^(?:\(\?:(.+)\)([?+*]|{[\d,]+})?|(.+))$/;function E(e){const t=n=>E(`(?<${n}>${`${e}`.replace(kn,"$1$2")})`);return{toString:()=>e.toString(),and:Object.assign((...n)=>E(`${e}${V(...n)}`),{referenceTo:n=>E(`${e}\\k<${n}>`)}),or:(...n)=>E(`(?:${e}|${V(...n)})`),after:(...n)=>E(`(?<=${V(...n)})${e}`),before:(...n)=>E(`${e}(?=${V(...n)})`),notAfter:(...n)=>E(`(?<!${V(...n)})${e}`),notBefore:(...n)=>E(`${e}(?!${V(...n)})`),times:Object.assign(n=>E(`${ne(e)}{${n}}`),{any:()=>E(`${ne(e)}*`),atLeast:n=>E(`${ne(e)}{${n},}`),atMost:n=>E(`${ne(e)}{0,${n}}`),between:(n,s)=>E(`${ne(e)}{${n},${s}}`)}),optionally:()=>E(`${ne(e)}?`),as:t,groupedAs:t,grouped:()=>E(`${e}`.replace(zn,"($1$3)$2")),at:{lineStart:()=>E(`^${e}`),lineEnd:()=>E(`${e}$`)}}}const Dn=/[.*+?^${}()|[\]\\/]/g;function he(e){return E(`[${e.replace(/[-\\^\]]/g,"\\$&")}]`)}function z(e){return E(`[^${e.replace(/[-\\^\]]/g,"\\$&")}]`)}function Un(...e){return E(`(?:${e.map(t=>V(t)).join("|")})`)}const be=E(".");E("\\b\\w+\\b");const G=E("\\w"),D=E("\\b"),Hn=E("\\d"),L=E("\\s"),Ft=Object.assign(E("[a-zA-Z]"),{lowercase:E("[a-z]"),uppercase:E("[A-Z]")}),Tt=E("\\t"),Pt=E("\\n");E("\\r"),E("\\W+"),E("\\W"),E("\\B"),E("\\D"),E("\\S"),Object.assign(E("[^a-zA-Z]"),{lowercase:E("[^a-z]"),uppercase:E("[^A-Z]")}),E("[^\\t]"),E("[^\\n]"),E("[^\\r]");function Y(...e){return E(`${ne(V(...e))}?`)}function V(...e){return E(e.map(t=>typeof t=="string"?t.replace(Dn,"\\$&"):t).join(""))}function C(...e){return E(`${ne(V(...e))}+`)}const q="i",j="g",N=(...e)=>{const t=e.length>1&&(Array.isArray(e[e.length-1])||e[e.length-1]instanceof Set)?e.pop():void 0;return new RegExp(V(...e).toString(),[...t||""].join(""))},Te=[],Gn=(e,t)=>{if(!e)return;const n=N(D,"else",D,[j,q]),s=e.content.match(n);s?.length&&Te.push({filePath:t,message:`else clauses found ${H}(${s.length})${b}`})},Vn=()=>{const e=[];return Te.length>0&&Te.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ else conditions${d}`,description:`ðŸ‘‰ ${O}Try to rewrite the conditions in a way that the else clause is not necessary.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/else-condition.html`,message:`${t.message} ðŸš¨`})}),e},Pe=[],qn=5,Kn=10,Zn=(e,t)=>{if(!e)return;const n=N(D,"if",D,[j,q]),s=N(D,"else",D,[j,q]),o=N(D,"for",D,[j,q]),r=N(D,"while",D,[j,q]),u=N(D,"case",D,[j,q]),h=e.content.match(n),g=e.content.match(s),v=e.content.match(o),A=e.content.match(r),_=e.content.match(u),F=(h?.length||0)+(g?.length||0)+(v?.length||0)+(A?.length||0)+(_?.length||0);F>qn&&Pe.push({filePath:t,message:`${F>Kn?H:S}(${F})${b}`})},Qn=()=>{const e=[];return Pe.length>0&&Pe.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ cyclomatic complexity${d}`,description:`ðŸ‘‰ ${O}Try to reduce complexity.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/cyclomatic-complexity.html`,message:`${t.message} ðŸš¨`})}),e},We=[],Yn=e=>{if(e.includes("pages"))return;const t=xe.basename(e);if(t==="App.vue")return;const n=N(Ft.uppercase);t.slice(1).match(n)?.length||We.push({filePath:e,message:`Component name is ${S}single word${b}`})},Xn=()=>{const e=[];return We.length>0&&We.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-essential ~ single name component${d}`,description:`ðŸ‘‰ ${O}Rename the component to use multi-word name.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-essential/single-name-component.html`,message:`${t.message} ðŸš¨`})}),e},Ie=[],Jn=(e,t)=>{e&&e.forEach(n=>{n.scoped||Ie.push({filePath:t,message:`${S}global style${b} used`})})},es=()=>{const e=[];return Ie.length>0&&Ie.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-essential ~ global style${d}`,description:`ðŸ‘‰ ${O}Use <style scoped>.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-essential/global-style.html`,message:`${t.message} ðŸš¨`})}),e},Be=[],ts=(e,t)=>{if(!e)return;const n=N("defineProps([",[j,q]);e.content.match(n)?.length&&Be.push({filePath:t,message:`${S}Props type${b} not defined`})},ns=()=>{const e=[];return Be.length>0&&Be.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-essential ~ simple prop${d}`,description:`ðŸ‘‰ ${O}Add at least type definition.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-essential/simple-prop.html`,message:`${t.message} ðŸš¨`})}),e},W=(e,t,n=0)=>{if(!t.includes(`
`))return e.split(`
`).findIndex((h,g)=>g>=n&&h.includes(t))+1;const s=e.split(`
`).slice(0,n).reduce((u,h)=>u+h.length,0),o=e.indexOf(t,s);return e.slice(0,o).split(`
`).length},Me=[],ss=(e,t)=>{if(!e)return;const n=N("<",C(z(">"))," v-if",C(z(">"))," v-for",C(z(">")),">",[j,q]),s=N("<",C(z(">"))," v-for",C(z(">"))," v-if",C(z(">")),">",[j,q]),o=e.content.match(n),r=e.content.match(s);if(o?.length||r?.length){const u=o?.length?o[0]:r?.length?r[0]:"",h=W(e.content,u);Me.push({filePath:t,message:`line #${h} ${S}v-if used with v-for${b}`})}},os=()=>{const e=[];return Me.length>0&&Me.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-essential ~ v-if used with v-for${d}`,description:`ðŸ‘‰ ${O}Move out the v-if to a computed property.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-essential/vif-with-vfor.html`,message:`${t.message} ðŸš¨`})}),e},ke=[],rs=(e,t)=>{if(!e)return;const n=N("<",C(z(">"))," v-for",C(z(">")),">",[j,q]),s=e.content.match(n);s?.length&&(s.some(r=>r.includes(":key"))||ke.push({filePath:t,message:`v-for used ${S}without a key${b}`}))},is=()=>{const e=[];return ke.length>0&&ke.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-essential ~ v-for has no key${d}`,description:`ðŸ‘‰ ${O}Add a \`:key\` property to all v-for.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-essential/vfor-no-key.html`,message:`${t.message} ðŸš¨`})}),e},ze=[],cs=e=>{if(e.includes("pages")||e.includes("layouts"))return;const t=xe.basename(e),n=/^[A-Z][a-zA-Z0-9]+(?:(?<!^)(?=[A-Z]))*.vue$/,s=t.match(n),o=/^([a-z0-9]+-)+[a-z0-9]+\.vue$/,r=t.match(o);!s?.length&&!r?.length&&ze.push({filePath:e,message:`component name is ${S}not PascalCase, nor kebab-case.${b}`})},as=()=>{const e=[];return ze.length>0&&ze.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ component name is not PascalCase and not kebab-case${d}`,description:`ðŸ‘‰ ${O}Rename the component to use PascalCase or kebab-case file name.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/component-filename-casing.html`,message:`${t.message} ðŸš¨`})}),e},De=[],ls=/^[a-z]+([A-Z][a-z]*)*$/,us=(e,t)=>{if(!e)return;const n=/defineProps\({([^}]+)/g;let s;for(;(s=n.exec(e.content))!==null;)s[1].replace(/\s+/g,"").replace(/["']/g,"").split(",").map(r=>r.split(":")[0]).filter(r=>r.length).filter(r=>!ls.test(r)).length&&De.push({filePath:t,message:`prop names are ${S}not camelCased${b}`})},fs=()=>{const e=[];return De.length>0&&De.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ prop names are not camelCased${d}`,description:`ðŸ‘‰ ${O}Rename the props to camelCase.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/prop-name-casing.html`,message:`${t.message} ðŸš¨`})}),e},Ue=[],hs=40,ps=(e,t)=>{if(!e)return;const n=/{{\s*([\s\S]*?)\s*}}/g;[...e.content.matchAll(n)].map(o=>o[1].trim()).forEach(o=>{if(o.length>hs){const r=W(e.content,o),u=o.split(`
`).at(0)?.trim()||"";Ue.push({filePath:t,message:`line #${r} ${S}${u}${b}`})}})},ds=()=>{const e=[];return Ue.length>0&&Ue.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ lengthy template expression${d}`,description:`ðŸ‘‰ ${O}Refactor the expression into a computed property.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/template-simple-expression.html`,message:`${t.message} ðŸš¨`})}),e},He=[],ms=(e,t)=>{if(!e)return;const n=e.template,s=N("<",C(G),Y(C(he(` 	
\r`))),C(z("/>")),Y(C(he(` 	
\r`))),Y("/"),">",["g"]),o=n?.content.match(s);if(o===null)return;const r=N(":",C(G),Y(" "),"=",Y(" "),z(`'"`),["g"]);o?.forEach(u=>{if(!u.includes(":"))return;const h=u.match(r);if(h?.length){const g=W(e.source,u);He.push({filePath:t,message:`line #${g} ${S}${h}${b}`})}})},gs=()=>{const e=[];return He.length>0&&He.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ attribute value is not quoted${d}`,description:`ðŸ‘‰ ${O}Use quotes for attribute values.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/quoted-attribute-values.html`,message:`${t.message} ðŸš¨`})}),e},Ge=[],$s=(e,t)=>{if(!e)return;const n=e.template,s=N("<",C(Ft.uppercase,G),Y(Pt,Tt),Y(C(z(">"))),"></",C(G),">",["g"]),o=n?.content?.match(s);o!==null&&o?.forEach(r=>{const u=W(e.source,r),h=r.split(`
`).at(-1)?.trim()||"";Ge.push({filePath:t,message:`line #${u} ${S}${h}${b}`})})},bs=()=>{const e=[];return Ge.length>0&&Ge.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ component is not self closing${d}`,description:`ðŸ‘‰ ${O}Components with no content should be self-closing.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/self-closing-components.html`,message:`${t.message} ðŸš¨`})}),e},Ve=[],Wt=[],ys=["v-slot","v-bind","v-on"],Es=(e,t)=>{if(!e)return;const n=e.template;ys.forEach(s=>{if(n?.content.includes(`${s}:`)){const o=W(e.source,s);Ve.push({filePath:t,message:`line #${o} ${S}${s}${b}`}),Wt.some(r=>r.filePath===t)||Wt.push({filePath:t})}})},vs=()=>{const e=[];return Ve.length>0&&Ve.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ directive shorthands not used${d}`,description:`ðŸ‘‰ ${O}Use ":" for v-bind:, "@" for v-on: and "#" for v-slot.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/directive-shorthands.html`,message:`${t.message} ðŸš¨`})}),e},qe=[],ws=3,Os=e=>{const t=N(C(z("/")).grouped(),V(".vue").at.lineEnd()),n=e.match(t);if(n){const s=n[0]?.split(".vue")[0],o=N(he("bcdfghjklmnpqrstvwxyzBCDFGHJKLMNPQRSTVWXYZ"),[j]),r=s.match(o);(!r||r.length<ws)&&qe.push({filePath:e,message:`${s} is not a ${S}full word.${b}`})}},As=()=>{const e=[];return qe.length>0&&qe.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ full-word component names${d}`,description:`ðŸ‘‰ ${O}Component names should prefer full words over abbreviations.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/full-word-component-name.html`,message:`${t.message} ðŸš¨`})}),e},Ke=[],Ss=(e,t)=>{const n=e.toString(),s=n.indexOf("<script setup>"),o=n.indexOf("<template>"),r=n.indexOf("<style>"),u=[{name:"script",index:s},{name:"template",index:o},{name:"style",index:r}].filter(g=>g.index!==-1);u.every((g,v)=>v===0?!0:u[v-1].index<g.index)||Ke.push({filePath:t,message:`Top level elements are ${S}not following the correct order.${b}`})},xs=()=>{const e=[];return Ke.length>0&&Ke.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-recommended ~ top level element order${d}`,description:`ðŸ‘‰ ${O}Single-File Components should always order <script>, <template>, and <style> tags consistently.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-recommended/top-level-element-order.html`,message:`${t.message} ðŸš¨`})}),e},Ze=[],It=["is","v-for","v-if","v-else-if","v-else","v-show","v-cloak","v-pre","v-once","id","ref","key","v-model","v-on","v-html","v-text"],Cs=(e,t)=>{if(!e)return;const n=e.content.replace(/<\/?template>/g,""),s=/<(\w+)(\s[^>]+)?>/g,o=/(\w+(?:-\w+)*)(?:="[^"]*")?/g;let r;for(;(r=s.exec(n))!==null;){const u=r[1],h=r[2];if(h){const v=Array.from(h.matchAll(o),_=>_[1]).filter(_=>It.includes(_));let A=-1;for(const _ of v){const F=It.indexOf(_);if(F!==-1&&F<A){Ze.push({filePath:t,message:`tag has attributes out of order ${S}(${u})${b}`});break}A=F}}}},_s=()=>{const e=[];return Ze.length>0&&Ze.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-recommended ~ element attribute order${d}`,description:`ðŸ‘‰ ${O}The attributes of elements (including components) should be ordered consistently.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-recommended/element-attribute-order.html`,message:`${t.message} ðŸš¨`})}),e},Qe=[],Ns=5,Rs=(e,t)=>{if(!e)return;const n=N("defineProps",Y("<"),Y("("),"{",C(be),"}",["g","s"]),s=e.content.match(n);if(s?.length){const o=s[0].split(",").length;o>Ns&&Qe.push({filePath:t,message:`props found ${H}(${o})${b}`})}},Ls=()=>{const e=[];return Qe.length>0&&Qe.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ too many props${d}`,description:`ðŸ‘‰ ${O}Try to refactor your code to use less properties.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/too-many-props.html`,message:`${t.message} ðŸš¨`})}),e},Ye=[],Bt=20,Xe=5,Mt=8;function js(e,t,n){t.split(`
`).length>Bt&&Ye.push({filePath:n,message:`function ${H}(${Is(e)})${b} is too long`})}function Fs(e,t){let n="",s=t;for(;s<e.length&&/\s/.test(e[s]);)s++;if(e.slice(s,s+Xe)==="const")for(s+=Xe;s<e.length&&/\s/.test(e[s]);)s++;for(;s<e.length&&/[\w$]/.test(e[s]);)n+=e[s],s++;return n.trim()}function Ts(e,t){let n=t;for(;n<e.length&&e[n]!=="{";)n++;return n+1}function Ps(e,t){let n="",s=-1;for(;t<e.length&&e[t]!=="=";)/\w/.test(e[t])&&(n+=e[t]),t++;return t=e.indexOf("=>",t),t===-1?null:(s=t+2,{name:n,bodyStart:s})}function Ws(e,t){let n=1,s="",o=t;for(;o<e.length&&n>0;){const r=e[o];r==="{"&&n++,r==="}"&&n--,s+=r,o++}return{body:s,end:o}}function Is(e){return e.replace(/^const\s*/,"")}const Bs=(e,t)=>{if(!e)return;const n=e.content,s=n.length;let o=0;for(;o<s;){let r="",u="",h=!1;if(n.slice(o,o+Mt)==="function"&&(o+=Mt,h=!0,r=Fs(n,o),o=Ts(n,o)),n.slice(o,o+Xe)==="const"){const g=Ps(n,o);g&&(h=!0,r=g.name,o=g.bodyStart)}if(h){const{body:g,end:v}=Ws(n,o);u=g,o=v,js(r,u,t)}h||o++}},Ms=()=>{const e=[];return Ye.length>0&&Ye.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ function size${d}`,description:`ðŸ‘‰ ${O}Functions must be shorter than ${Bt} lines.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/function-size.html`,message:`${t.message} ðŸš¨`})}),e},Je=[],kt=3,zt=(e,t,n)=>{const s=t.split(",").map(o=>o.trim()).filter(o=>o.length>0);s.length>kt&&Je.push({filePath:n,message:`function ${S}${e}${b} has ${S}${s.length}${b} parameters`})},ks=(e,t)=>{if(!e)return;const n=/function\s+([\w$]+)\s*\(([^)]*)\)\s*\{|const\s+([\w$]+)\s*=\s*\(([^)]*)\)\s*=>\s*\{/g;let s;for(;(s=n.exec(e.content))!==null;)s[1]?zt(s[1],s[2],t):s[3]&&zt(s[3],s[4],t)},zs=()=>{const e=[];return Je.length>0&&Je.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ parameter count${d}`,description:`ðŸ‘‰ ${O}Max number of function parameters should be ${kt}.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/parameter-count.html`,message:`${t.message} ðŸš¨`})}),e},et=[],Ds=(e,t)=>{if(!e)return;const n=N("defineProps(",L.times.any(),"[",L.times.any(),C(he(`'"`),C(G),he(`'"`),L.times.any(),Y(",",L.times.any())),"]",L.times.any(),")",[j]),s=N("<",C(G).grouped(),L,z(">").times.any(),":",C(G).grouped(),L.times.any(),"=",L.times.any(),'"props.',C(G).grouped(),'"',[j]);let o;const r=new Set;for(;(o=n.exec(e.content))!==null;)o[0].replace(/defineProps\(|[)[\]'"\s]/g,"").split(",").forEach(g=>r.add(g));let u;for(;(u=s.exec(e.content))!==null;){const h=u[1],g=u[2],v=u[3];r.has(v)&&g===v&&et.push({filePath:t,message:`Prop ${S}(${v})${b} is being drilled through ${S}${h}${b} component unmodified.`})}},Us=()=>{const e=[];return et.length>0&&et.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ props drilling${d}`,description:`ðŸ‘‰ ${O}Props should not be forwarded unmodified. Consider refactoring.${d}`,message:`${t.message} ðŸš¨`})}),e},tt=[],Dt=4,Hs=(e,t)=>{if(!e)return;const n=/\b(?:const|var|let)\s+([a-zA-Z_$][\w$]*)/g;let s;for(;(s=n.exec(e.content))!==null;){const o=s[1];o.length<Dt&&tt.push({filePath:t,message:`${H}(${o})${b}`})}},Gs=()=>{const e=[];return tt.length>0&&tt.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ short variable names${d}`,description:`ðŸ‘‰ ${O}Variable names must have a minimum length of ${Dt}.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/short-variable-name.html`,message:`${t.message} ðŸš¨`})}),e},Ut=[],ye=[],Vs=5,qs=(e,t)=>{if(!e)return;const n=/const\s+([a-zA-Z0-9_$]+)\s*=\s*computed\(\s*\(\)\s*=>\s*{([^{}]*(?:{[^{}]*}[^{}]*)*)}\s*\)/gs,s=e.content.match(n);s?.length&&s.forEach(o=>{if(o.split(`
`).length>Vs){const r=o.split(`
`)[0],u=W(e.content,r);Ut.push({filePath:t,message:`line #${u} ${S}computed${b}`}),ye.push({filePath:t}),ye.some(h=>h.filePath===t)||ye.push({filePath:t})}})},Ks=()=>{const e=[];return ye.length>0&&Ut.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ complicated computed property${d}`,description:`ðŸ‘‰ ${O}Refactor the computed properties to smaller ones.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/simple-computed.html`,message:`${t.message} ðŸš¨`})}),e},nt=[],Zs=(e,t)=>{if(!e)return;const n=/app\.component\('([^']+)',\s*\{[^}]*\}\)/g;[...e.content.matchAll(n)].map(o=>o[1].trim()).forEach(o=>{const r=W(e.content.trim(),o),u=o.split(`
`).at(0)?.trim()||"";nt.push({filePath:t,message:`line #${r} ${S}(${u})${b}`})})},Qs=()=>{const e=[];return nt.length>0&&nt.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ component files${d}`,description:`ðŸ‘‰ ${O}Whenever a build system is available to concatenate files, each component should be in its own file.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-strong/component-files.html`,message:`${t.message} ðŸš¨`})}),e},Ee=[],Ys=(e,t)=>{if(!e)return;const n=/defineProps\(([^)]+)\)/,s=/v-model\s*=\s*"([^"]+)"/,o=N(V("$parent").or("getCurrentInstance"),[j]),r=e.content.match(n),u=e.content.match(s);if(u){const g=u[1].split(".")[0];if((r?r[1]:"").includes(g)){const A=W(e.content.trim(),g);Ee.push({filePath:t,message:`line #${A} ${S}(${g})${b}`})}}const h=e.content.match(o);if(h){const g=W(e.content.trim(),h[0]);Ee.push({filePath:t,message:`line #${g} ${S}(${h[0]})${b}`})}},Xs=()=>{const e=[];return Ee.length>0&&Ee.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-caution ~ implicit parent-child communication${d}`,description:`ðŸ‘‰ ${O}Avoid implicit parent-child communication to maintain clear and predictable component behavior.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-caution/implicit-parent-child-communication.html`,message:`${t.message} ðŸš¨`})}),e},st=[],Ht=5,Js=3,eo=(e,t)=>{if(!e)return;const n=N(Tt.times.atLeast(Ht).or(L.times.atLeast(Js*Ht)),[j,q]);e.content.match(n)?.forEach(o=>{const r=W(e.content,o);st.push({filePath:t,message:`line #${r} ${S}indentation: ${o.length}${b}`})})},to=()=>{const e=[];return st.length>0&&st.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ deep indentation${d}`,description:`ðŸ‘‰ ${O}Try to refactor your component to child components, to avoid deep indentations.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/deep-indentation.html`,message:`${t.message} ðŸš¨`})}),e},ot=[],no=(e,t)=>{if(!e)return;const n=N("<a",D,[j,q]),s=e.content.match(n);s?.length&&ot.push({filePath:t,message:`${s?.length} ${S}html link found${b}`})},so=()=>{const e=[];return ot.length>0&&ot.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ html link${d}`,description:`ðŸ‘‰ ${O}Use router-link or NuxtLink.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/html-link.html`,message:`${t.message} ðŸš¨`})}),e},rt=[],oo=(e,t)=>{if(!e)return;const s=e.content.split(`
`);s.forEach((o,r)=>{const u=o.trim();if(u.startsWith("if (")&&!u.includes("{")){const h=s[r+1]?.trim();(!h||!h.startsWith("{")&&!u.endsWith("{"))&&rt.push({filePath:t,message:`line #${r} if statement without curly braces: ${H}${u}${b}`})}})},ro=()=>{const e=[];return rt.length>0&&rt.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ if without curly braces${d}`,description:`ðŸ‘‰ ${O}All if statements must be enclosed in curly braces for better readability and maintainability.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/if-without-curly-braces.html`,message:`${t.message} ðŸš¨`})}),e},it=[],io=(e,t)=>{if(!e)return;const n=N(C(Hn).as("magicNumber"),Un(")",Pt),[j]);let s,o=0;for(;(s=n.exec(e.content))!==null;){const r=s.groups?.magicNumber||"",u=W(e.content,r,o);it.push({filePath:t,message:`line #${u} ${S}magic number: ${r}${b}`}),o=u}},co=()=>{const e=[];return it.length&&it.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ magic numbers${d}`,description:`ðŸ‘‰ ${O}Extract magic numbers to a constant.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/magic-numbers.html`,message:`magic numbers found (${t.message}) ðŸš¨`})}),e},ct=[],ao=(e,t)=>{if(!e)return;const n=/<(\w+)([^>]*)>/g;let s;for(;(s=n.exec(e.content))!==null;){const o=s[1],r=s[2];r.split(/\s+/).filter(h=>h.trim()!=="").length>1&&r.split(`
`).length===1&&ct.push({filePath:t,message:`Element ${S}<${o}>${b} should have its attributes on separate lines`})}},lo=()=>{const e=[];return ct.length>0&&ct.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-strong ~ multi-attribute elements${d}`,description:`ðŸ‘‰ ${O}Elements with multiple attributes should span multiple lines, with one attribute per line.${d}`,message:`${t.message} ðŸš¨`})}),e},uo=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","search","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],at=[],fo=(e,t)=>{if(!e)return;const n=/([a-z]+)\s*\{[^}]*\}/gi;e.forEach(s=>{let o;for(;(o=n.exec(s.content))!==null;){const r=o[1];uo.includes(r)&&at.push({filePath:t,message:`${S}(${r})${b}`})}})},ho=()=>{const e=[];return at.length>0&&at.forEach(t=>{e.push({file:t.filePath,rule:`${x}vue-caution ~ element selectors with scoped${d}`,description:`ðŸ‘‰ ${O}Prefer class selectors over element selectors in scoped styles, because large numbers of element selectors are slow.${d} See: https://vue-mess-detector.webmania.cc/rules/vue-caution/element-selectors-with-scoped.html`,message:`${t.message} ðŸš¨`})}),e},lt=[],po=(e,t)=>{if(!e)return;const n=N(C(be),L,"?",L,C(be),L,":",L,C(be));e.content.match(n)?.forEach(o=>{if(o.split("?").length-1>1){const r=W(e.content,o);lt.push({filePath:t,message:`line #${r} has ${S}nested ternary${b}`})}})},mo=()=>{const e=[];return lt.length>0&&lt.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ nested Ternary${d}`,description:`ðŸ‘‰ ${O}/* TODO tip to fix this issue */.${d} See: https:///* TODO doc link */`,message:`${t.message} ðŸš¨`})}),e},ut=[],go=(e,t)=>{if(!e)return;const n=N('v-for="(',L.times.any(),C(G).grouped(),L.times.any(),",",L.times.any(),C(G).grouped(),L.times.any(),")",C(L),"in",C(L),C(G).grouped(),[j]),s=N(':key="',L.times.any(),C(G).grouped(),L.times.any(),'"',[j]),o=[...e.content.matchAll(n)],r=[...e.content.matchAll(s)];o.forEach(u=>{const[h,g,v,A]=u;r.forEach(_=>{const F=_[1];if(F===v){const X=W(e.content.trim(),F);ut.push({filePath:t,message:`line #${X} ${S}index is being used as :key in v-for${b}`})}})})},$o=()=>{const e=[];return ut.length>0&&ut.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ VFor With Index Key${d}`,description:`ðŸ‘‰ ${O}Avoid using index as key in v-for loops.${d} See: https://`,message:`${t.message} ðŸš¨`})}),e},ft=[],bo=(e,t)=>{if(!e)return;const n=/(\w+(?:\.\w+)*)\.length\s*>\s*0/g;let s;for(;(s=n.exec(e.content))!==null;){const o=s[0],r=s[1],u=W(e.content.trim(),o);ft.push({filePath:t,message:`line #${u} zero length comparison found ${S}(${r})${b}`})}},yo=()=>{const e=[];return ft.length>0&&ft.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ Zero Length Comparison${d}`,description:`ðŸ‘‰ ${O}In JavaScript, any number greater than 0 is truthy, so you can directly use the length property.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/zero-length-comparison.html`,message:`${t.message} ðŸš¨`})}),e},ht=[],Eo=(e,t)=>{if(!e)return;const n=/(?:const|let)\s*\{\s*([^\}]+?)\s*\}\s*=\s*(?:defineProps|props)\s*\(\s*(?:\[[^\]]*\]|\{[^\}]*\})?\s*\)/g;e.content.match(n)?.forEach(o=>{const r=W(e.content,o);ht.push({filePath:t,message:`line #${r} ${S}props destructuring found: ${o}${b}`})})},vo=()=>{const e=[];return ht.length>0&&ht.forEach(t=>{e.push({file:t.filePath,rule:`${x}rrd ~ no Prop Destructure${d}`,description:`ðŸ‘‰ ${O}Avoid destructuring props in the setup function. Use \`props.propName\` instead of \`const { propName } = defineProps()\`.${d} See: https://vue-mess-detector.webmania.cc/rules/rrd/no-props-destructure.html`,message:`${t.message} ðŸš¨`})}),e},wo=(e,t,n)=>{const s={},o=({file:g,rule:v,title:A,description:_,message:F})=>{const X=e==="rule"?v:g;s[X]||(s[X]=[]),s[X].push({file:g,rule:v,title:A,description:_,message:F})},r=g=>{g().forEach(A=>{o(A)})};r(Xn),r(ns),r(is),r(os),r(es),r(as),r(Qs),r(vs),r(As),r(lo),r(fs),r(gs),r(bs),r(Ks),r(ds),r(xs),r(_s),r(Xs),r(ho),r(Qn),r(to),r(Vn),r(Ms),r(so),r(ro),r(co),r(mo),r(vo),r(zs),r(Bn),r(Us),r(Wn),r(Gs),r(Ls),r($o),r(yo);const u=[];return Object.keys(s).sort((g,v)=>{const A=s[g].length,_=s[v].length;return t==="desc"?_-A:A-_}).forEach(g=>{console.log(`
 - ${g}`),s[g].forEach(v=>{const A=v.message.includes(H);if(u.some(_=>_.file===v.file)){const _=u.find(F=>F.file===v.file);_&&(A?_.errors++:_.warnings++)}else u.push({file:v.file,errors:A?1:0,warnings:A?0:1});n==="error"&&!A||(console.log(e==="file"?`   Rule: ${v.rule}`:`   File: ${v.file}`),console.log(`   Description: ${v.description}`),console.log(`   Message: ${v.message||"ðŸš¨"}
`))})}),u},Oo=(e,t,n)=>{const s=e.scriptSetup||e.script;console.log(`Analyzing ${t}...`);const o=t.endsWith(".vue");n.includes("vue-essential")&&(ts(s,t),o&&(Yn(t),Jn(e.styles,t),rs(e.template,t),ss(e.template,t))),n.includes("vue-strong")&&(qs(s,t),o&&(Zs(s,t),us(s,t),cs(t),$s(e,t),ps(e.template,t),ms(e,t),Es(e,t),Os(t),ao(e.template,t))),n.includes("vue-recommended")&&o&&(Ss(e.source,t),Cs(e.template,t)),n.includes("vue-caution")&&o&&(Ys(s,t),fo(e.styles,t)),n.includes("rrd")&&(Zn(s,t),eo(s,t),Gn(s,t),Bs(s,t),oo(s,t),io(s,t),po(s,t),ks(s,t),Ds(s,t),Pn(s,t),Hs(s,t),Rs(s,t),Eo(s,t),bo(s,t),o&&(no(e.template,t),In(e.script,t),go(e.template,t)))},Ao=1.5,Gt=75,Vt=85,qt=95,So={groupBy:["rule","file"],orderBy:["asc","desc"],outputLevel:["all","error"]};function pt(e,t){const n=So[t];return n.includes(e)||(console.error(`
Invalid option "${e}" provided for flag "${t}". Valid options are: ${n.join(", ")}.
`),process.exit(1)),e}function xo(e,t,n){const{errors:s,warnings:o}=e.reduce((u,{errors:h,warnings:g})=>({errors:u.errors+h,warnings:u.warnings+g}),{errors:0,warnings:0});console.log(`Found ${H}${Intl.NumberFormat("en-US").format(s)} errors${b}, and ${S}${Intl.NumberFormat("en-US").format(o)} warnings${b}, ${U}${Intl.NumberFormat("en-US").format(t)} lines${b} of code in ${U}${Intl.NumberFormat("en-US").format(n)} files${b}`);const r=Math.ceil((1-(s*Ao+o)/t)*100);return r<Gt&&console.log(`${H}Code health is LOW: ${r}%${b}`),r>=Gt&&r<Vt&&console.log(`${S}Code health is MEDIUM ${r}%${b}`),r>=Vt&&r<qt&&console.log(`${U}Code health is OK: ${r}%${b}`),r>=qt&&console.log(`${jt}Code health is GOOD: ${r}%${b}`),{errors:s,warnings:o}}let dt=0,Kt=0,Zt=[];const Co=["cache","coverage","dist",".git","node_modules",".nuxt","vendor"],Qt=async e=>{if(!(await me.stat(e)).isDirectory()){await Yt(e,e);return}const n=await me.readdir(e);for(const s of n){const o=xe.join(e,s);(await me.stat(o)).isDirectory()&&(Co.some(u=>o.includes(u))||await Qt(o)),await Yt(o,o)}},Yt=async(e,t)=>{if(e.endsWith(".vue")||e.endsWith(".ts")||e.endsWith(".js")){dt++;const n=await me.readFile(t,"utf-8");Kt+=n.split(/\r\n|\r|\n/).length;const{descriptor:s}=cn.parse(n);(e.endsWith(".ts")||e.endsWith(".js"))&&(s.script={content:n}),Oo(s,t,Zt)}},_o=async({dir:e,level:t,apply:n=[],groupBy:s,orderBy:o})=>{const r=re.filter(v=>!n.includes(v));console.log(`

${U}Analyzing Vue, TS and JS files in ${e}${b}`),console.log(`Applying ${U}${n.length}${b} rulesets ${U}${n}${b}
    Ignoring ${U}${r.length}${b} rulesets ${U}${r}${b}
    Output level ${U}${t}${b}
    Grouping by ${U}${s}${b}
    Ordering ${U}${o}${b}`),Zt=n,await Qt(e),console.log(`Found ${U}${dt}${b} files`);const u=wo(s,o,t),{errors:h,warnings:g}=xo(u,Kt,dt);!h&&!g&&console.log(`${jt}No code smells detected!${b}`)};B(un(process.argv)).command("analyze [path]","Analyze Vue files for code smells and best practices",e=>e.positional("path",{describe:"path to the Vue files",default:"./"}).option("apply",{alias:"a",describe:"Comma-separated list of rulesets to apply.",choices:re,coerce:Xt("apply"),group:"Filter Rulesets:"}).option("group",{alias:"g",describe:"Group results at the output",choices:["rule","file"],coerce:t=>pt(t,"groupBy"),default:"rule",group:"Group Results:"}).option("level",{alias:"l",describe:"Output level",choices:["all","error"],coerce:t=>pt(t,"outputLevel"),default:"all",group:"Output:"}).option("ignore",{alias:"i",describe:"Comma-separated list of rulesets to ignore.",choices:re,coerce:Xt("ignore"),group:"Filter Rulesets:"}).option("order",{alias:"o",describe:"Order results at the output",choices:["asc","desc"],coerce:t=>pt(t,"orderBy"),default:"desc",group:"Order Results:"}).check(t=>(t.ignore&&t.apply&&(console.error(`
${H}Cannot use both --ignore and --apply options together.${b}.

`),process.exit(1)),!0)),e=>{let t=[...re];e.apply&&(t=e.apply),e.ignore&&(t=re.filter(n=>!e.ignore.includes(n))),_o({dir:e.path,level:e.level,apply:t,groupBy:e.group,orderBy:e.order})}).help().argv;function Xt(e){return t=>{const n=t.split(","),s=n.filter(o=>!re.includes(o));return s.length>0&&(console.error(`
${H}Invalid ${e} values: ${s.join(", ")}${b}. 
${O}Allowed values are: ${[...re].join(", ")}${d}

`),process.exit(1)),n}}});
