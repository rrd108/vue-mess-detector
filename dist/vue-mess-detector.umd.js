(function(N,M){typeof exports=="object"&&typeof module<"u"?M(require("yargs"),require("util"),require("path"),require("fs"),require("assert"),require("url"),require("@vue/compiler-sfc")):typeof define=="function"&&define.amd?define(["yargs","util","path","fs","assert","url","@vue/compiler-sfc"],M):(N=typeof globalThis<"u"?globalThis:N||self,M(N.yargs,N.util,N.path,N.fs,N.assert,N.url,N.compilerSfc))})(this,function(N,M,O,P,je,Qe,Ye){"use strict";var xe=typeof document<"u"?document.currentScript:null;class V extends Error{constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,V)}}function Ne(){return Ze()?0:1}function Ze(){return He()&&!process.defaultApp}function He(){return!!process.versions.electron}function Je(n){return n.slice(Ne()+1)}function Xe(){return process.argv[Ne()]}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function D(n){if(n!==n.toLowerCase()&&n!==n.toUpperCase()||(n=n.toLowerCase()),n.indexOf("-")===-1&&n.indexOf("_")===-1)return n;{let s="",r=!1;const a=n.match(/^-+/);for(let f=a?a[0].length:0;f<n.length;f++){let p=n.charAt(f);r&&(r=!1,p=p.toUpperCase()),f!==0&&(p==="-"||p==="_")?r=!0:p!=="-"&&p!=="_"&&(s+=p)}return s}}function Se(n,e){const s=n.toLowerCase();e=e||"-";let r="";for(let a=0;a<n.length;a++){const f=s.charAt(a),p=n.charAt(a);f!==p&&a>0?r+=`${e}${s.charAt(a)}`:r+=p}return r}function ve(n){return n==null?!1:typeof n=="number"||/^0x[0-9a-f]+$/i.test(n)?!0:/^0[^.]/.test(n)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(n)}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function ke(n){if(Array.isArray(n))return n.map(p=>typeof p!="string"?p+"":p);n=n.trim();let e=0,s=null,r=null,a=null;const f=[];for(let p=0;p<n.length;p++){if(s=r,r=n.charAt(p),r===" "&&!a){s!==" "&&e++;continue}r===a?a=null:(r==="'"||r==='"')&&!a&&(a=r),f[e]||(f[e]=""),f[e]+=r}return f}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var S;(function(n){n.BOOLEAN="boolean",n.STRING="string",n.NUMBER="number",n.ARRAY="array"})(S||(S={}));/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */let B;class et{constructor(e){B=e}parse(e,s){const r=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},s),a=ke(e),f=typeof e=="string",p=tt(Object.assign(Object.create(null),r.alias)),m=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},r.configuration),E=Object.assign(Object.create(null),r.default),x=r.configObjects||[],$=r.envPrefix,I=m["populate--"],q=I?"--":"_",fe=Object.create(null),qe=Object.create(null),U=r.__||B.format,l={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},T=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,_e=new RegExp("^--"+m["negation-prefix"]+"(.+)");[].concat(r.array||[]).filter(Boolean).forEach(function(t){const i=typeof t=="object"?t.key:t,u=Object.keys(t).map(function(c){return{boolean:"bools",string:"strings",number:"numbers"}[c]}).filter(Boolean).pop();u&&(l[u][i]=!0),l.arrays[i]=!0,l.keys.push(i)}),[].concat(r.boolean||[]).filter(Boolean).forEach(function(t){l.bools[t]=!0,l.keys.push(t)}),[].concat(r.string||[]).filter(Boolean).forEach(function(t){l.strings[t]=!0,l.keys.push(t)}),[].concat(r.number||[]).filter(Boolean).forEach(function(t){l.numbers[t]=!0,l.keys.push(t)}),[].concat(r.count||[]).filter(Boolean).forEach(function(t){l.counts[t]=!0,l.keys.push(t)}),[].concat(r.normalize||[]).filter(Boolean).forEach(function(t){l.normalize[t]=!0,l.keys.push(t)}),typeof r.narg=="object"&&Object.entries(r.narg).forEach(([t,i])=>{typeof i=="number"&&(l.nargs[t]=i,l.keys.push(t))}),typeof r.coerce=="object"&&Object.entries(r.coerce).forEach(([t,i])=>{typeof i=="function"&&(l.coercions[t]=i,l.keys.push(t))}),typeof r.config<"u"&&(Array.isArray(r.config)||typeof r.config=="string"?[].concat(r.config).filter(Boolean).forEach(function(t){l.configs[t]=!0}):typeof r.config=="object"&&Object.entries(r.config).forEach(([t,i])=>{(typeof i=="boolean"||typeof i=="function")&&(l.configs[t]=i)})),kt(r.key,p,r.default,l.arrays),Object.keys(E).forEach(function(t){(l.aliases[t]||[]).forEach(function(i){E[i]=E[t]})});let W=null;rn();let ue=[];const A=Object.assign(Object.create(null),{_:[]}),Ue={};for(let t=0;t<a.length;t++){const i=a[t],u=i.replace(/^-{3,}/,"---");let c,o,d,h,g,w;if(i!=="--"&&/^-/.test(i)&&ge(i))we(i);else if(u.match(/^---+(=|$)/)){we(i);continue}else if(i.match(/^--.+=/)||!m["short-option-groups"]&&i.match(/^-.+=/))h=i.match(/^--?([^=]+)=([\s\S]*)$/),h!==null&&Array.isArray(h)&&h.length>=3&&(y(h[1],l.arrays)?t=de(t,h[1],a,h[2]):y(h[1],l.nargs)!==!1?t=he(t,h[1],a,h[2]):b(h[1],h[2],!0));else if(i.match(_e)&&m["boolean-negation"])h=i.match(_e),h!==null&&Array.isArray(h)&&h.length>=2&&(o=h[1],b(o,y(o,l.arrays)?[!1]:!1));else if(i.match(/^--.+/)||!m["short-option-groups"]&&i.match(/^-[^-]+/))h=i.match(/^--?(.+)/),h!==null&&Array.isArray(h)&&h.length>=2&&(o=h[1],y(o,l.arrays)?t=de(t,o,a):y(o,l.nargs)!==!1?t=he(t,o,a):(g=a[t+1],g!==void 0&&(!g.match(/^-/)||g.match(T))&&!y(o,l.bools)&&!y(o,l.counts)||/^(true|false)$/.test(g)?(b(o,g),t++):b(o,G(o))));else if(i.match(/^-.\..+=/))h=i.match(/^-([^=]+)=([\s\S]*)$/),h!==null&&Array.isArray(h)&&h.length>=3&&b(h[1],h[2]);else if(i.match(/^-.\..+/)&&!i.match(T))g=a[t+1],h=i.match(/^-(.\..+)/),h!==null&&Array.isArray(h)&&h.length>=2&&(o=h[1],g!==void 0&&!g.match(/^-/)&&!y(o,l.bools)&&!y(o,l.counts)?(b(o,g),t++):b(o,G(o)));else if(i.match(/^-[^-]+/)&&!i.match(T)){d=i.slice(1,-1).split(""),c=!1;for(let C=0;C<d.length;C++){if(g=i.slice(C+2),d[C+1]&&d[C+1]==="="){w=i.slice(C+3),o=d[C],y(o,l.arrays)?t=de(t,o,a,w):y(o,l.nargs)!==!1?t=he(t,o,a,w):b(o,w),c=!0;break}if(g==="-"){b(d[C],g);continue}if(/[A-Za-z]/.test(d[C])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(g)&&y(g,l.bools)===!1){b(d[C],g),c=!0;break}if(d[C+1]&&d[C+1].match(/\W/)){b(d[C],g),c=!0;break}else b(d[C],G(d[C]))}o=i.slice(-1)[0],!c&&o!=="-"&&(y(o,l.arrays)?t=de(t,o,a):y(o,l.nargs)!==!1?t=he(t,o,a):(g=a[t+1],g!==void 0&&(!/^(-|--)[^-]/.test(g)||g.match(T))&&!y(o,l.bools)&&!y(o,l.counts)||/^(true|false)$/.test(g)?(b(o,g),t++):b(o,G(o))))}else if(i.match(/^-[0-9]$/)&&i.match(T)&&y(i.slice(1),l.bools))o=i.slice(1),b(o,G(o));else if(i==="--"){ue=a.slice(t+1);break}else if(m["halt-at-non-option"]){ue=a.slice(t);break}else we(i)}Ve(A,!0),Ve(A,!1),Zt(A),Ht(),De(A,l.aliases,E,!0),Jt(A),m["set-placeholder-key"]&&Xt(A),Object.keys(l.counts).forEach(function(t){re(A,t.split("."))||b(t,0)}),I&&ue.length&&(A[q]=[]),ue.forEach(function(t){A[q].push(t)}),m["camel-case-expansion"]&&m["strip-dashed"]&&Object.keys(A).filter(t=>t!=="--"&&t.includes("-")).forEach(t=>{delete A[t]}),m["strip-aliased"]&&[].concat(...Object.keys(p).map(t=>p[t])).forEach(t=>{m["camel-case-expansion"]&&t.includes("-")&&delete A[t.split(".").map(i=>D(i)).join(".")],delete A[t]});function we(t){const i=pe("_",t);(typeof i=="string"||typeof i=="number")&&A._.push(i)}function he(t,i,u,c){let o,d=y(i,l.nargs);if(d=typeof d!="number"||isNaN(d)?1:d,d===0)return z(c)||(W=Error(U("Argument unexpected for: %s",i))),b(i,G(i)),t;let h=z(c)?0:1;if(m["nargs-eats-options"])u.length-(t+1)+h<d&&(W=Error(U("Not enough arguments following: %s",i))),h=d;else{for(o=t+1;o<u.length&&(!u[o].match(/^-[^0-9]/)||u[o].match(T)||ge(u[o]));o++)h++;h<d&&(W=Error(U("Not enough arguments following: %s",i)))}let g=Math.min(h,d);for(!z(c)&&g>0&&(b(i,c),g--),o=t+1;o<g+t+1;o++)b(i,u[o]);return t+g}function de(t,i,u,c){let o=[],d=c||u[t+1];const h=y(i,l.nargs);if(y(i,l.bools)&&!/^(true|false)$/.test(d))o.push(!0);else if(z(d)||z(c)&&/^-/.test(d)&&!T.test(d)&&!ge(d)){if(E[i]!==void 0){const g=E[i];o=Array.isArray(g)?g:[g]}}else{z(c)||o.push(Oe(i,c,!0));for(let g=t+1;g<u.length&&!(!m["greedy-arrays"]&&o.length>0||h&&typeof h=="number"&&o.length>=h||(d=u[g],/^-/.test(d)&&!T.test(d)&&!ge(d)));g++)t=g,o.push(Oe(i,d,f))}return typeof h=="number"&&(h&&o.length<h||isNaN(h)&&o.length===0)&&(W=Error(U("Not enough arguments following: %s",i))),b(i,o),t}function b(t,i,u=f){if(/-/.test(t)&&m["camel-case-expansion"]){const d=t.split(".").map(function(h){return D(h)}).join(".");Ge(t,d)}const c=Oe(t,i,u),o=t.split(".");ce(A,o,c),l.aliases[t]&&l.aliases[t].forEach(function(d){const h=d.split(".");ce(A,h,c)}),o.length>1&&m["dot-notation"]&&(l.aliases[o[0]]||[]).forEach(function(d){let h=d.split(".");const g=[].concat(o);g.shift(),h=h.concat(g),(l.aliases[t]||[]).includes(h.join("."))||ce(A,h,c)}),y(t,l.normalize)&&!y(t,l.arrays)&&[t].concat(l.aliases[t]||[]).forEach(function(h){Object.defineProperty(Ue,h,{enumerable:!0,get(){return i},set(g){i=typeof g=="string"?B.normalize(g):g}})})}function Ge(t,i){l.aliases[t]&&l.aliases[t].length||(l.aliases[t]=[i],fe[i]=!0),l.aliases[i]&&l.aliases[i].length||Ge(i,t)}function Oe(t,i,u){u&&(i=nt(i)),(y(t,l.bools)||y(t,l.counts))&&typeof i=="string"&&(i=i==="true");let c=Array.isArray(i)?i.map(function(o){return pe(t,o)}):pe(t,i);return y(t,l.counts)&&(z(c)||typeof c=="boolean")&&(c=me()),y(t,l.normalize)&&y(t,l.arrays)&&(Array.isArray(i)?c=i.map(o=>B.normalize(o)):c=B.normalize(i)),c}function pe(t,i){return!m["parse-positional-numbers"]&&t==="_"||!y(t,l.strings)&&!y(t,l.bools)&&!Array.isArray(i)&&(ve(i)&&m["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))||!z(i)&&y(t,l.numbers))&&(i=Number(i)),i}function Zt(t){const i=Object.create(null);De(i,l.aliases,E),Object.keys(l.configs).forEach(function(u){const c=t[u]||i[u];if(c)try{let o=null;const d=B.resolve(B.cwd(),c),h=l.configs[u];if(typeof h=="function"){try{o=h(d)}catch(g){o=g}if(o instanceof Error){W=o;return}}else o=B.require(d);Ce(o)}catch(o){o.name==="PermissionDenied"?W=o:t[u]&&(W=Error(U("Invalid JSON config file: %s",c)))}})}function Ce(t,i){Object.keys(t).forEach(function(u){const c=t[u],o=i?i+"."+u:u;typeof c=="object"&&c!==null&&!Array.isArray(c)&&m["dot-notation"]?Ce(c,o):(!re(A,o.split("."))||y(o,l.arrays)&&m["combine-arrays"])&&b(o,c)})}function Ht(){typeof x<"u"&&x.forEach(function(t){Ce(t)})}function Ve(t,i){if(typeof $>"u")return;const u=typeof $=="string"?$:"",c=B.env();Object.keys(c).forEach(function(o){if(u===""||o.lastIndexOf(u,0)===0){const d=o.split("__").map(function(h,g){return g===0&&(h=h.substring(u.length)),D(h)});(i&&l.configs[d.join(".")]||!i)&&!re(t,d)&&b(d.join("."),c[o])}})}function Jt(t){let i;const u=new Set;Object.keys(t).forEach(function(c){if(!u.has(c)&&(i=y(c,l.coercions),typeof i=="function"))try{const o=pe(c,i(t[c]));[].concat(l.aliases[c]||[],c).forEach(d=>{u.add(d),t[d]=o})}catch(o){W=o}})}function Xt(t){return l.keys.forEach(i=>{~i.indexOf(".")||typeof t[i]>"u"&&(t[i]=void 0)}),t}function De(t,i,u,c=!1){Object.keys(u).forEach(function(o){re(t,o.split("."))||(ce(t,o.split("."),u[o]),c&&(qe[o]=!0),(i[o]||[]).forEach(function(d){re(t,d.split("."))||ce(t,d.split("."),u[o])}))})}function re(t,i){let u=t;m["dot-notation"]||(i=[i.join(".")]),i.slice(0,-1).forEach(function(o){u=u[o]||{}});const c=i[i.length-1];return typeof u!="object"?!1:c in u}function ce(t,i,u){let c=t;m["dot-notation"]||(i=[i.join(".")]),i.slice(0,-1).forEach(function(w){w=Fe(w),typeof c=="object"&&c[w]===void 0&&(c[w]={}),typeof c[w]!="object"||Array.isArray(c[w])?(Array.isArray(c[w])?c[w].push({}):c[w]=[c[w],{}],c=c[w][c[w].length-1]):c=c[w]});const o=Fe(i[i.length-1]),d=y(i.join("."),l.arrays),h=Array.isArray(u);let g=m["duplicate-arguments-array"];!g&&y(o,l.nargs)&&(g=!0,(!z(c[o])&&l.nargs[o]===1||Array.isArray(c[o])&&c[o].length===l.nargs[o])&&(c[o]=void 0)),u===me()?c[o]=me(c[o]):Array.isArray(c[o])?g&&d&&h?c[o]=m["flatten-duplicate-arrays"]?c[o].concat(u):(Array.isArray(c[o][0])?c[o]:[c[o]]).concat([u]):!g&&!!d==!!h?c[o]=u:c[o]=c[o].concat([u]):c[o]===void 0&&d?c[o]=h?u:[u]:g&&!(c[o]===void 0||y(o,l.counts)||y(o,l.bools))?c[o]=[c[o],u]:c[o]=u}function kt(...t){t.forEach(function(i){Object.keys(i||{}).forEach(function(u){l.aliases[u]||(l.aliases[u]=[].concat(p[u]||[]),l.aliases[u].concat(u).forEach(function(c){if(/-/.test(c)&&m["camel-case-expansion"]){const o=D(c);o!==u&&l.aliases[u].indexOf(o)===-1&&(l.aliases[u].push(o),fe[o]=!0)}}),l.aliases[u].concat(u).forEach(function(c){if(c.length>1&&/[A-Z]/.test(c)&&m["camel-case-expansion"]){const o=Se(c,"-");o!==u&&l.aliases[u].indexOf(o)===-1&&(l.aliases[u].push(o),fe[o]=!0)}}),l.aliases[u].forEach(function(c){l.aliases[c]=[u].concat(l.aliases[u].filter(function(o){return c!==o}))}))})})}function y(t,i){const u=[].concat(l.aliases[t]||[],t),c=Object.keys(i),o=u.find(d=>c.includes(d));return o?i[o]:!1}function Ke(t){const i=Object.keys(l);return[].concat(i.map(c=>l[c])).some(function(c){return Array.isArray(c)?c.includes(t):c[t]})}function en(t,...i){return[].concat(...i).some(function(c){const o=t.match(c);return o&&Ke(o[1])})}function tn(t){if(t.match(T)||!t.match(/^-[^-]+/))return!1;let i=!0,u;const c=t.slice(1).split("");for(let o=0;o<c.length;o++){if(u=t.slice(o+2),!Ke(c[o])){i=!1;break}if(c[o+1]&&c[o+1]==="="||u==="-"||/[A-Za-z]/.test(c[o])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(u)||c[o+1]&&c[o+1].match(/\W/))break}return i}function ge(t){return m["unknown-options-as-args"]&&nn(t)}function nn(t){return t=t.replace(/^-{3,}/,"--"),t.match(T)||tn(t)?!1:!en(t,/^-+([^=]+?)=[\s\S]*$/,_e,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function G(t){return!y(t,l.bools)&&!y(t,l.counts)&&`${t}`in E?E[t]:sn(on(t))}function sn(t){return{[S.BOOLEAN]:!0,[S.STRING]:"",[S.NUMBER]:void 0,[S.ARRAY]:[]}[t]}function on(t){let i=S.BOOLEAN;return y(t,l.strings)?i=S.STRING:y(t,l.numbers)?i=S.NUMBER:y(t,l.bools)?i=S.BOOLEAN:y(t,l.arrays)&&(i=S.ARRAY),i}function z(t){return t===void 0}function rn(){Object.keys(l.counts).find(t=>y(t,l.arrays)?(W=Error(U("Invalid configuration: %s, opts.count excludes opts.array.",t)),!0):y(t,l.nargs)?(W=Error(U("Invalid configuration: %s, opts.count excludes opts.narg.",t)),!0):!1)}return{aliases:Object.assign({},l.aliases),argv:Object.assign(Ue,A),configuration:m,defaulted:Object.assign({},qe),error:W,newAliases:Object.assign({},fe)}}}function tt(n){const e=[],s=Object.create(null);let r=!0;for(Object.keys(n).forEach(function(a){e.push([].concat(n[a],a))});r;){r=!1;for(let a=0;a<e.length;a++)for(let f=a+1;f<e.length;f++)if(e[a].filter(function(m){return e[f].indexOf(m)!==-1}).length){e[a]=e[a].concat(e[f]),e.splice(f,1),r=!0;break}}return e.forEach(function(a){a=a.filter(function(p,m,E){return E.indexOf(p)===m});const f=a.pop();f!==void 0&&typeof f=="string"&&(s[f]=a)}),s}function me(n){return n!==void 0?n+1:1}function Fe(n){return n==="__proto__"?"___proto___":n}function nt(n){return typeof n=="string"&&(n[0]==="'"||n[0]==='"')&&n[n.length-1]===n[0]?n.substring(1,n.length-1):n}/**
 * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
 * CJS and ESM environments.
 *
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var ye,be,Ee;const Le=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,Re=(be=(ye=process==null?void 0:process.versions)===null||ye===void 0?void 0:ye.node)!==null&&be!==void 0?be:(Ee=process==null?void 0:process.version)===null||Ee===void 0?void 0:Ee.slice(1);if(Re&&Number(Re.match(/^([^.]+)/)[1])<Le)throw Error(`yargs parser supports a minimum Node.js version of ${Le}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);const st=process?process.env:{},We=new et({cwd:process.cwd,env:()=>st,format:M.format,normalize:O.normalize,resolve:O.resolve,require:n=>{if(typeof require<"u")return require(n);if(n.match(/\.json$/))return JSON.parse(P.readFileSync(n,"utf8"));throw Error("only .json config files are supported in ESM")}}),K=function(e,s){return We.parse(e.slice(),s).argv};K.detailed=function(n,e){return We.parse(n.slice(),e)},K.camelCase=D,K.decamelize=Se,K.looksLikeNumber=ve;const ot={right:ft,center:ut},it=0,ae=1,rt=2,le=3;class ct{constructor(e){var s;this.width=e.width,this.wrap=(s=e.wrap)!==null&&s!==void 0?s:!0,this.rows=[]}span(...e){const s=this.div(...e);s.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);const s=e.map(r=>typeof r=="string"?this.colFromString(r):r);return this.rows.push(s),s}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){const s=e.split(`
`).map(a=>a.split("	"));let r=0;return s.forEach(a=>{a.length>1&&j.stringWidth(a[0])>r&&(r=Math.min(Math.floor(this.width*.5),j.stringWidth(a[0])))}),s.forEach(a=>{this.div(...a.map((f,p)=>({text:f.trim(),padding:this.measurePadding(f),width:p===0&&a.length>1?r:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){const s=j.stripAnsi(e);return[0,s.match(/\s*$/)[0].length,0,s.match(/^\s*/)[0].length]}toString(){const e=[];return this.rows.forEach(s=>{this.rowToString(s,e)}),e.filter(s=>!s.hidden).map(s=>s.text).join(`
`)}rowToString(e,s){return this.rasterize(e).forEach((r,a)=>{let f="";r.forEach((p,m)=>{const{width:E}=e[m],x=this.negatePadding(e[m]);let $=p;if(x>j.stringWidth(p)&&($+=" ".repeat(x-j.stringWidth(p))),e[m].align&&e[m].align!=="left"&&this.wrap){const q=ot[e[m].align];$=q($,x),j.stringWidth($)<x&&($+=" ".repeat((E||0)-j.stringWidth($)-1))}const I=e[m].padding||[0,0,0,0];I[le]&&(f+=" ".repeat(I[le])),f+=Pe(e[m],$,"| "),f+=$,f+=Pe(e[m],$," |"),I[ae]&&(f+=" ".repeat(I[ae])),a===0&&s.length>0&&(f=this.renderInline(f,s[s.length-1]))}),s.push({text:f.replace(/ +$/,""),span:e.span})}),s}renderInline(e,s){const r=e.match(/^ */),a=r?r[0].length:0,f=s.text,p=j.stringWidth(f.trimRight());return s.span?this.wrap?a<p?e:(s.hidden=!0,f.trimRight()+" ".repeat(a-p)+e.trimLeft()):(s.hidden=!0,f+e):e}rasterize(e){const s=[],r=this.columnWidths(e);let a;return e.forEach((f,p)=>{f.width=r[p],this.wrap?a=j.wrap(f.text,this.negatePadding(f),{hard:!0}).split(`
`):a=f.text.split(`
`),f.border&&(a.unshift("."+"-".repeat(this.negatePadding(f)+2)+"."),a.push("'"+"-".repeat(this.negatePadding(f)+2)+"'")),f.padding&&(a.unshift(...new Array(f.padding[it]||0).fill("")),a.push(...new Array(f.padding[rt]||0).fill(""))),a.forEach((m,E)=>{s[E]||s.push([]);const x=s[E];for(let $=0;$<p;$++)x[$]===void 0&&x.push("");x.push(m)})}),s}negatePadding(e){let s=e.width||0;return e.padding&&(s-=(e.padding[le]||0)+(e.padding[ae]||0)),e.border&&(s-=4),s}columnWidths(e){if(!this.wrap)return e.map(p=>p.width||j.stringWidth(p.text));let s=e.length,r=this.width;const a=e.map(p=>{if(p.width)return s--,r-=p.width,p.width}),f=s?Math.floor(r/s):0;return a.map((p,m)=>p===void 0?Math.max(f,at(e[m])):p)}}function Pe(n,e,s){return n.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?s:"  ":""}function at(n){const e=n.padding||[],s=1+(e[le]||0)+(e[ae]||0);return n.border?s+4:s}function lt(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}function ft(n,e){n=n.trim();const s=j.stringWidth(n);return s<e?" ".repeat(e-s)+n:n}function ut(n,e){n=n.trim();const s=j.stringWidth(n);return s>=e?n:" ".repeat(e-s>>1)+n}let j;function ht(n,e){return j=e,new ct({width:n?.width||lt(),wrap:n?.wrap})}const Te=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function Be(n){return n.replace(Te,"")}function dt(n,e){const[s,r]=n.match(Te)||["",""];n=Be(n);let a="";for(let f=0;f<n.length;f++)f!==0&&f%e===0&&(a+=`
`),a+=n.charAt(f);return s&&r&&(a=`${s}${a}${r}`),a}function pt(n){return ht(n,{stringWidth:e=>[...e].length,stripAnsi:Be,wrap:dt})}function gt(n,e){let s=O.resolve(".",n),r;for(P.statSync(s).isDirectory()||(s=O.dirname(s));;){if(r=e(s,P.readdirSync(s)),r)return O.resolve(s,r);if(s=O.dirname(r=s),r===s)break}}const mt={fs:{readFileSync:P.readFileSync,writeFile:P.writeFile},format:M.format,resolve:O.resolve,exists:n=>{try{return P.statSync(n).isFile()}catch{return!1}}};let v;class yt{constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);const s=e.shift();let r=function(){};return typeof e[e.length-1]=="function"&&(r=e.pop()),r=r||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][s]&&this.updateFiles?(this.cache[this.locale][s]=s,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:r})):r(),v.format.apply(v.format,[this.cache[this.locale][s]||s].concat(e))}__n(){const e=Array.prototype.slice.call(arguments),s=e.shift(),r=e.shift(),a=e.shift();let f=function(){};typeof e[e.length-1]=="function"&&(f=e.pop()),this.cache[this.locale]||this._readLocaleFile();let p=a===1?s:r;this.cache[this.locale][s]&&(p=this.cache[this.locale][s][a===1?"one":"other"]),!this.cache[this.locale][s]&&this.updateFiles?(this.cache[this.locale][s]={one:s,other:r},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:f})):f();const m=[p];return~p.indexOf("%d")&&m.push(a),v.format.apply(v.format,m.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(this.cache[this.locale][s]=e[s])}_taggedLiteral(e,...s){let r="";return e.forEach(function(a,f){const p=s[f+1];r+=a,typeof p<"u"&&(r+="%s")}),this.__.apply(this,[r].concat([].slice.call(s,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){const e=this,s=this.writeQueue[0],r=s.directory,a=s.locale,f=s.cb,p=this._resolveLocaleFile(r,a),m=JSON.stringify(this.cache[a],null,2);v.fs.writeFile(p,m,"utf-8",function(E){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),f(E)})}_readLocaleFile(){let e={};const s=this._resolveLocaleFile(this.directory,this.locale);try{v.fs.readFileSync&&(e=JSON.parse(v.fs.readFileSync(s,"utf-8")))}catch(r){if(r instanceof SyntaxError&&(r.message="syntax error in "+s),r.code==="ENOENT")e={};else throw r}this.cache[this.locale]=e}_resolveLocaleFile(e,s){let r=v.resolve(e,"./",s+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(r)&&~s.lastIndexOf("_")){const a=v.resolve(e,"./",s.split("_")[0]+".json");this._fileExistsSync(a)&&(r=a)}return r}_fileExistsSync(e){return v.exists(e)}}function bt(n,e){v=e;const s=new yt(n);return{__:s.__.bind(s),__n:s.__n.bind(s),setLocale:s.setLocale.bind(s),getLocale:s.getLocale.bind(s),updateLocale:s.updateLocale.bind(s),locale:s.locale}}const Et=n=>bt(n,mt),$t="require is not supported by ESM",Ie="loading a directory of commands is not supported yet for ESM";let Q;try{Q=Qe.fileURLToPath(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:xe&&xe.src||new URL("vue-mess-detector.umd.js",document.baseURI).href)}catch{Q=process.cwd()}const At=Q.substring(0,Q.lastIndexOf("node_modules"));je.notStrictEqual,je.strictEqual,M.inspect,At||process.cwd(),O.basename,O.dirname,O.extname,O.relative,O.resolve,process.cwd,process.exit,process.nextTick,typeof process.stdout.columns<"u"&&process.stdout.columns,P.readFileSync,Et({directory:O.resolve(Q,"../../../locales"),updateFiles:!1});const $e="\x1B[44m",Y="\x1B[43m",F="\x1B[41m",_t="\x1B[42m",_="\x1B[0m",L="\x1B[33m",R="\x1B[0m",Ae=50,Z=[],wt=(n,e)=>{const s=n.content.split(`
`);s.length>Ae&&Z.push({fileName:e,scriptLength:s.length})},Ot=()=>(Z.length>0&&(console.log(`
${F}Long <script> blocks${_} in ${Z.length} files.`),console.log(`ðŸ‘‰ ${L}Try to refactor out the logic into composable functions or other files and keep the script block's length under ${Ae} lines.${R}`),Z.forEach(n=>{console.log(`- ${n.fileName} ${n.scriptLength>Ae*2?F:Y}(${n.scriptLength} lines)${_}`)})),Z.length),H=[],Ct=n=>{H.push(n)},jt=()=>(H.length>0&&(console.log(`
${Y}Plain <script> blocks${_} in ${H.length} files.`),console.log(`ðŸ‘‰ ${L} Consider using <script setup> to leverage the new SFC <script> syntax.${R}`),H.forEach(n=>{console.log(`- ${n}`)})),H.length),J=[],xt=(n,e)=>{const s=/\belse\b/gi,r=n.content.match(s);r?.length&&J.push({fileName:e,elseCount:r.length})},Nt=()=>(J.length>0&&(console.log(`
${Y}else conditions${_} are used in ${J.length} files.`),console.log(`ðŸ‘‰ ${L}Try to rewrite the conditions in a way that the else clause is not necessary.${R}`),J.forEach(n=>{console.log(`- ${n.fileName} ${Y}(${n.elseCount})${_}`)})),J.length),St=5,vt=10,X=[],Ft=(n,e)=>{const s=/\bif\b/gi,r=/\belse\b/gi,a=/\bfor\b/gi,f=/\bwhile\b/gi,p=/\bcase\b/gi,m=n.content.match(s),E=n.content.match(r),x=n.content.match(a),$=n.content.match(f),I=n.content.match(p),q=(m?.length||0)+(E?.length||0)+(x?.length||0)+($?.length||0)+(I?.length||0);q>St&&X.push({fileName:e,cyclomaticComplexity:q})},Lt=()=>(X.length>0&&(console.log(`
${$e}cyclomaticComplexity${_} is above moderate in ${X.length} files.`),console.log(`ðŸ‘‰ ${L}Try to reduce complexity.${R}`),X.forEach(n=>{console.log(`- ${n.fileName} ${n.cyclomaticComplexity>vt?F:Y}(${n.cyclomaticComplexity})${_}`)})),X.length),k=[],Rt=n=>{if(n.includes("pages"))return;const e=O.basename(n);if(e==="App.vue")return;const s=/[A-Z]/;e.slice(1).match(s)?.length||k.push({filePath:n})},Wt=()=>(k.length>0&&(console.log(`
${F}single name component${_} is used in ${k.length} files.`),console.log(`ðŸ‘‰ ${L}Rename the component to use multi-word name.${R} See: https://vuejs.org/style-guide/rules-essential.html#use-multi-word-component-names`),k.forEach(n=>{console.log(`- ${n.filePath} ðŸš¨`)})),k.length),ee=[],Pt=(n,e)=>{n.scoped||ee.push({filePath:e})},Tt=()=>(ee.length>0&&(console.log(`
${F}Global style ${_} is used in ${ee.length} files.`),console.log(`ðŸ‘‰ ${L}Use <style scoped>.${R} See: https://vuejs.org/style-guide/rules-essential.html#use-component-scoped-styling`),ee.forEach(n=>{console.log(`- ${n.filePath} ðŸš¨`)})),ee.length),te=[],Bt=(n,e)=>{const s=/defineProps\(\[/gi;n.content.match(s)?.length&&te.push({filePath:e})},It=()=>(te.length>0&&(console.log(`
${F}simple prop${_} is used in ${te.length} files.`),console.log(`ðŸ‘‰ ${L}Add at least type definition.${R} See: https://vuejs.org/style-guide/rules-essential.html#use-detailed-prop-definitions`),te.forEach(n=>{console.log(`- ${n.filePath} ðŸš¨`)})),te.length),ne=[],zt=(n,e)=>{const s=/<[^>]+ v-if[^>]+ v-for[^>]+>/gi,r=/<[^>]+ v-for[^>]+ v-if[^>]+>/gi,a=n.content.match(s),f=n.content.match(r);(a?.length||f?.length)&&ne.push({filePath:e})},Mt=()=>(ne.length>0&&(console.log(`
${F}v-if used with v-for${_} in ${ne.length} files.`),console.log(`ðŸ‘‰ ${L}Move out the v-if to a computed property.${R} See: https://vuejs.org/style-guide/rules-essential.html#avoid-v-if-with-v-for`),ne.forEach(n=>{console.log(`- ${n.filePath} ðŸš¨`)})),ne.length),se=[],qt=(n,e)=>{const s=/<[^>]+ v-for[^>]+>/gi,r=n.content.match(s);r?.length&&(r.some(f=>f.includes(":key"))||se.push({filePath:e}))},Ut=()=>(se.length>0&&(console.log(`
${F}v-for has no key${_} in ${se.length} files.`),console.log(`ðŸ‘‰ ${L}Add a \`:key\` property to all v-for.${R} See: https://vuejs.org/style-guide/rules-essential.html#use-keyed-v-for`),se.forEach(n=>{console.log(`- ${n.filePath} ðŸš¨`)})),se.length),oe=[],Gt=n=>{const e=O.basename(n),s=/^[A-Z][a-zA-Z0-9]+(?:(?<!^)(?=[A-Z]))*.vue$/,r=e.match(s),a=/^([a-z0-9]+-)+[a-z0-9]+\.vue$/,f=e.match(a);!r?.length&&!f?.length&&oe.push({fileName:n})},Vt=()=>(oe.length>0&&(console.log(`
${F}component name is not PascalCase and not kebab-abse${_} in ${oe.length} files.`),console.log(`ðŸ‘‰ ${L}Rename the component to use PascalCase or kebab-case file name.${R} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#single-file-component-filename-casing`),oe.forEach(n=>{console.log(`- ${F}${n.fileName}${_}`)})),oe.length),ie=[],Dt=/^[a-z]+([A-Z][a-z]*)+$/,Kt=(n,e)=>{const s=/defineProps\({([^}]+)/g;let r;for(;(r=s.exec(n.content))!==null;)r[1].replace(/\s+/g,"").replace(/["']/g,"").split(",").map(f=>f.split(":")[0]).filter(f=>f.length).filter(f=>!Dt.test(f)).length&&ie.push({filePath:e})},Qt=()=>(ie.length>0&&(console.log(`
${F}prop names are not camelCased${_} in ${ie.length} files.`),console.log(`ðŸ‘‰ ${L}Rename the props to camelCase.${R} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#prop-name-casing`),ie.forEach(n=>{console.log(`- ${n.filePath} ðŸš¨`)})),ie.length);let ze=0;const Me=(n,e)=>{const s=P.readdirSync(n);ze+=s.length;for(const r of s){const a=O.join(n,r);P.statSync(a).isDirectory()?Me(a,e):r.endsWith(".vue")&&e(a)}},Yt=n=>{console.log(`

${$e}Analyzing Vue files in ${n}${_}`);let e=0;Me(n,s=>{const r=P.readFileSync(s,"utf-8"),{descriptor:a}=Ye.parse(r);Rt(s),Gt(s),a.script&&Ct(s);const f=a.scriptSetup||a.script;f&&(Bt(f,s),Kt(f,s),wt(f,s),Ft(f,s),xt(f,s)),a.styles.forEach(p=>{Pt(p,s)}),a.template&&(qt(a.template,s),zt(a.template,s))}),console.log(`Found ${$e}${ze}${_} Vue files`),e+=Wt(),e+=It(),e+=Ut(),e+=Mt(),e+=Tt(),e+=Vt(),e+=Qt(),e+=Ot(),e+=jt(),e+=Lt(),e+=Nt(),e||console.log(`${_t}No code smells detected!${_}`)};N(Je(process.argv)).command("analyze [path]","Analyze Vue files for code smells",n=>n.positional("path",{describe:"path to the Vue files",type:"string",default:"./src"}),n=>{Yt(n.path)}).help().argv});
