(function(N,I){typeof exports=="object"&&typeof module<"u"?I(require("yargs"),require("util"),require("path"),require("fs"),require("assert"),require("url"),require("@vue/compiler-sfc")):typeof define=="function"&&define.amd?define(["yargs","util","path","fs","assert","url","@vue/compiler-sfc"],I):(N=typeof globalThis<"u"?globalThis:N||self,I(N.yargs,N.util,N.path,N.fs,N.assert,N.url,N.compilerSfc))})(this,function(N,I,w,R,_e,Me,Ue){"use strict";var Ae=typeof document<"u"?document.currentScript:null;class M extends Error{constructor(t){super(t||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,M)}}function Oe(){return De()?0:1}function De(){return Ge()&&!process.defaultApp}function Ge(){return!!process.versions.electron}function Qe(i){return i.slice(Oe()+1)}function Ye(){return process.argv[Oe()]}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function U(i){if(i!==i.toLowerCase()&&i!==i.toUpperCase()||(i=i.toLowerCase()),i.indexOf("-")===-1&&i.indexOf("_")===-1)return i;{let r="",c=!1;const l=i.match(/^-+/);for(let u=l?l[0].length:0;u<i.length;u++){let p=i.charAt(u);c&&(c=!1,p=p.toUpperCase()),u!==0&&(p==="-"||p==="_")?c=!0:p!=="-"&&p!=="_"&&(r+=p)}return r}}function we(i,t){const r=i.toLowerCase();t=t||"-";let c="";for(let l=0;l<i.length;l++){const u=r.charAt(l),p=i.charAt(l);u!==p&&l>0?c+=`${t}${r.charAt(l)}`:c+=p}return c}function $e(i){return i==null?!1:typeof i=="number"||/^0x[0-9a-f]+$/i.test(i)?!0:/^0[^.]/.test(i)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(i)}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function Ve(i){if(Array.isArray(i))return i.map(p=>typeof p!="string"?p+"":p);i=i.trim();let t=0,r=null,c=null,l=null;const u=[];for(let p=0;p<i.length;p++){if(r=c,c=i.charAt(p),c===" "&&!l){r!==" "&&t++;continue}c===l?l=null:(c==="'"||c==='"')&&!l&&(l=c),u[t]||(u[t]=""),u[t]+=c}return u}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var S;(function(i){i.BOOLEAN="boolean",i.STRING="string",i.NUMBER="number",i.ARRAY="array"})(S||(S={}));/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */let v;class He{constructor(t){v=t}parse(t,r){const c=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),l=Ve(t),u=typeof t=="string",p=Ke(Object.assign(Object.create(null),c.alias)),m=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},c.configuration),E=Object.assign(Object.create(null),c.default),x=c.configObjects||[],_=c.envPrefix,T=m["populate--"],P=T?"--":"_",se=Object.create(null),Te=Object.create(null),z=c.__||v.format,a={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},W=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,me=new RegExp("^--"+m["negation-prefix"]+"(.+)");[].concat(c.array||[]).filter(Boolean).forEach(function(e){const s=typeof e=="object"?e.key:e,f=Object.keys(e).map(function(o){return{boolean:"bools",string:"strings",number:"numbers"}[o]}).filter(Boolean).pop();f&&(a[f][s]=!0),a.arrays[s]=!0,a.keys.push(s)}),[].concat(c.boolean||[]).filter(Boolean).forEach(function(e){a.bools[e]=!0,a.keys.push(e)}),[].concat(c.string||[]).filter(Boolean).forEach(function(e){a.strings[e]=!0,a.keys.push(e)}),[].concat(c.number||[]).filter(Boolean).forEach(function(e){a.numbers[e]=!0,a.keys.push(e)}),[].concat(c.count||[]).filter(Boolean).forEach(function(e){a.counts[e]=!0,a.keys.push(e)}),[].concat(c.normalize||[]).filter(Boolean).forEach(function(e){a.normalize[e]=!0,a.keys.push(e)}),typeof c.narg=="object"&&Object.entries(c.narg).forEach(([e,s])=>{typeof s=="number"&&(a.nargs[e]=s,a.keys.push(e))}),typeof c.coerce=="object"&&Object.entries(c.coerce).forEach(([e,s])=>{typeof s=="function"&&(a.coercions[e]=s,a.keys.push(e))}),typeof c.config<"u"&&(Array.isArray(c.config)||typeof c.config=="string"?[].concat(c.config).filter(Boolean).forEach(function(e){a.configs[e]=!0}):typeof c.config=="object"&&Object.entries(c.config).forEach(([e,s])=>{(typeof s=="boolean"||typeof s=="function")&&(a.configs[e]=s)})),vt(c.key,p,c.default,a.arrays),Object.keys(E).forEach(function(e){(a.aliases[e]||[]).forEach(function(s){E[s]=E[e]})});let L=null;qt();let re=[];const A=Object.assign(Object.create(null),{_:[]}),Be={};for(let e=0;e<l.length;e++){const s=l[e],f=s.replace(/^-{3,}/,"---");let o,n,d,h,g,O;if(s!=="--"&&/^-/.test(s)&&le(s))be(s);else if(f.match(/^---+(=|$)/)){be(s);continue}else if(s.match(/^--.+=/)||!m["short-option-groups"]&&s.match(/^-.+=/))h=s.match(/^--?([^=]+)=([\s\S]*)$/),h!==null&&Array.isArray(h)&&h.length>=3&&(b(h[1],a.arrays)?e=ce(e,h[1],l,h[2]):b(h[1],a.nargs)!==!1?e=oe(e,h[1],l,h[2]):y(h[1],h[2],!0));else if(s.match(me)&&m["boolean-negation"])h=s.match(me),h!==null&&Array.isArray(h)&&h.length>=2&&(n=h[1],y(n,b(n,a.arrays)?[!1]:!1));else if(s.match(/^--.+/)||!m["short-option-groups"]&&s.match(/^-[^-]+/))h=s.match(/^--?(.+)/),h!==null&&Array.isArray(h)&&h.length>=2&&(n=h[1],b(n,a.arrays)?e=ce(e,n,l):b(n,a.nargs)!==!1?e=oe(e,n,l):(g=l[e+1],g!==void 0&&(!g.match(/^-/)||g.match(W))&&!b(n,a.bools)&&!b(n,a.counts)||/^(true|false)$/.test(g)?(y(n,g),e++):y(n,q(n))));else if(s.match(/^-.\..+=/))h=s.match(/^-([^=]+)=([\s\S]*)$/),h!==null&&Array.isArray(h)&&h.length>=3&&y(h[1],h[2]);else if(s.match(/^-.\..+/)&&!s.match(W))g=l[e+1],h=s.match(/^-(.\..+)/),h!==null&&Array.isArray(h)&&h.length>=2&&(n=h[1],g!==void 0&&!g.match(/^-/)&&!b(n,a.bools)&&!b(n,a.counts)?(y(n,g),e++):y(n,q(n)));else if(s.match(/^-[^-]+/)&&!s.match(W)){d=s.slice(1,-1).split(""),o=!1;for(let $=0;$<d.length;$++){if(g=s.slice($+2),d[$+1]&&d[$+1]==="="){O=s.slice($+3),n=d[$],b(n,a.arrays)?e=ce(e,n,l,O):b(n,a.nargs)!==!1?e=oe(e,n,l,O):y(n,O),o=!0;break}if(g==="-"){y(d[$],g);continue}if(/[A-Za-z]/.test(d[$])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(g)&&b(g,a.bools)===!1){y(d[$],g),o=!0;break}if(d[$+1]&&d[$+1].match(/\W/)){y(d[$],g),o=!0;break}else y(d[$],q(d[$]))}n=s.slice(-1)[0],!o&&n!=="-"&&(b(n,a.arrays)?e=ce(e,n,l):b(n,a.nargs)!==!1?e=oe(e,n,l):(g=l[e+1],g!==void 0&&(!/^(-|--)[^-]/.test(g)||g.match(W))&&!b(n,a.bools)&&!b(n,a.counts)||/^(true|false)$/.test(g)?(y(n,g),e++):y(n,q(n))))}else if(s.match(/^-[0-9]$/)&&s.match(W)&&b(s.slice(1),a.bools))n=s.slice(1),y(n,q(n));else if(s==="--"){re=l.slice(e+1);break}else if(m["halt-at-non-option"]){re=l.slice(e);break}else be(s)}Pe(A,!0),Pe(A,!1),Ft(A),Lt(),ze(A,a.aliases,E,!0),Rt(A),m["set-placeholder-key"]&&Wt(A),Object.keys(a.counts).forEach(function(e){ee(A,e.split("."))||y(e,0)}),T&&re.length&&(A[P]=[]),re.forEach(function(e){A[P].push(e)}),m["camel-case-expansion"]&&m["strip-dashed"]&&Object.keys(A).filter(e=>e!=="--"&&e.includes("-")).forEach(e=>{delete A[e]}),m["strip-aliased"]&&[].concat(...Object.keys(p).map(e=>p[e])).forEach(e=>{m["camel-case-expansion"]&&e.includes("-")&&delete A[e.split(".").map(s=>U(s)).join(".")],delete A[e]});function be(e){const s=ae("_",e);(typeof s=="string"||typeof s=="number")&&A._.push(s)}function oe(e,s,f,o){let n,d=b(s,a.nargs);if(d=typeof d!="number"||isNaN(d)?1:d,d===0)return B(o)||(L=Error(z("Argument unexpected for: %s",s))),y(s,q(s)),e;let h=B(o)?0:1;if(m["nargs-eats-options"])f.length-(e+1)+h<d&&(L=Error(z("Not enough arguments following: %s",s))),h=d;else{for(n=e+1;n<f.length&&(!f[n].match(/^-[^0-9]/)||f[n].match(W)||le(f[n]));n++)h++;h<d&&(L=Error(z("Not enough arguments following: %s",s)))}let g=Math.min(h,d);for(!B(o)&&g>0&&(y(s,o),g--),n=e+1;n<g+e+1;n++)y(s,f[n]);return e+g}function ce(e,s,f,o){let n=[],d=o||f[e+1];const h=b(s,a.nargs);if(b(s,a.bools)&&!/^(true|false)$/.test(d))n.push(!0);else if(B(d)||B(o)&&/^-/.test(d)&&!W.test(d)&&!le(d)){if(E[s]!==void 0){const g=E[s];n=Array.isArray(g)?g:[g]}}else{B(o)||n.push(ye(s,o,!0));for(let g=e+1;g<f.length&&!(!m["greedy-arrays"]&&n.length>0||h&&typeof h=="number"&&n.length>=h||(d=f[g],/^-/.test(d)&&!W.test(d)&&!le(d)));g++)e=g,n.push(ye(s,d,u))}return typeof h=="number"&&(h&&n.length<h||isNaN(h)&&n.length===0)&&(L=Error(z("Not enough arguments following: %s",s))),y(s,n),e}function y(e,s,f=u){if(/-/.test(e)&&m["camel-case-expansion"]){const d=e.split(".").map(function(h){return U(h)}).join(".");Ie(e,d)}const o=ye(e,s,f),n=e.split(".");te(A,n,o),a.aliases[e]&&a.aliases[e].forEach(function(d){const h=d.split(".");te(A,h,o)}),n.length>1&&m["dot-notation"]&&(a.aliases[n[0]]||[]).forEach(function(d){let h=d.split(".");const g=[].concat(n);g.shift(),h=h.concat(g),(a.aliases[e]||[]).includes(h.join("."))||te(A,h,o)}),b(e,a.normalize)&&!b(e,a.arrays)&&[e].concat(a.aliases[e]||[]).forEach(function(h){Object.defineProperty(Be,h,{enumerable:!0,get(){return s},set(g){s=typeof g=="string"?v.normalize(g):g}})})}function Ie(e,s){a.aliases[e]&&a.aliases[e].length||(a.aliases[e]=[s],se[s]=!0),a.aliases[s]&&a.aliases[s].length||Ie(s,e)}function ye(e,s,f){f&&(s=Je(s)),(b(e,a.bools)||b(e,a.counts))&&typeof s=="string"&&(s=s==="true");let o=Array.isArray(s)?s.map(function(n){return ae(e,n)}):ae(e,s);return b(e,a.counts)&&(B(o)||typeof o=="boolean")&&(o=fe()),b(e,a.normalize)&&b(e,a.arrays)&&(Array.isArray(s)?o=s.map(n=>v.normalize(n)):o=v.normalize(s)),o}function ae(e,s){return!m["parse-positional-numbers"]&&e==="_"||!b(e,a.strings)&&!b(e,a.bools)&&!Array.isArray(s)&&($e(s)&&m["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${s}`)))||!B(s)&&b(e,a.numbers))&&(s=Number(s)),s}function Ft(e){const s=Object.create(null);ze(s,a.aliases,E),Object.keys(a.configs).forEach(function(f){const o=e[f]||s[f];if(o)try{let n=null;const d=v.resolve(v.cwd(),o),h=a.configs[f];if(typeof h=="function"){try{n=h(d)}catch(g){n=g}if(n instanceof Error){L=n;return}}else n=v.require(d);Ee(n)}catch(n){n.name==="PermissionDenied"?L=n:e[f]&&(L=Error(z("Invalid JSON config file: %s",o)))}})}function Ee(e,s){Object.keys(e).forEach(function(f){const o=e[f],n=s?s+"."+f:f;typeof o=="object"&&o!==null&&!Array.isArray(o)&&m["dot-notation"]?Ee(o,n):(!ee(A,n.split("."))||b(n,a.arrays)&&m["combine-arrays"])&&y(n,o)})}function Lt(){typeof x<"u"&&x.forEach(function(e){Ee(e)})}function Pe(e,s){if(typeof _>"u")return;const f=typeof _=="string"?_:"",o=v.env();Object.keys(o).forEach(function(n){if(f===""||n.lastIndexOf(f,0)===0){const d=n.split("__").map(function(h,g){return g===0&&(h=h.substring(f.length)),U(h)});(s&&a.configs[d.join(".")]||!s)&&!ee(e,d)&&y(d.join("."),o[n])}})}function Rt(e){let s;const f=new Set;Object.keys(e).forEach(function(o){if(!f.has(o)&&(s=b(o,a.coercions),typeof s=="function"))try{const n=ae(o,s(e[o]));[].concat(a.aliases[o]||[],o).forEach(d=>{f.add(d),e[d]=n})}catch(n){L=n}})}function Wt(e){return a.keys.forEach(s=>{~s.indexOf(".")||typeof e[s]>"u"&&(e[s]=void 0)}),e}function ze(e,s,f,o=!1){Object.keys(f).forEach(function(n){ee(e,n.split("."))||(te(e,n.split("."),f[n]),o&&(Te[n]=!0),(s[n]||[]).forEach(function(d){ee(e,d.split("."))||te(e,d.split("."),f[n])}))})}function ee(e,s){let f=e;m["dot-notation"]||(s=[s.join(".")]),s.slice(0,-1).forEach(function(n){f=f[n]||{}});const o=s[s.length-1];return typeof f!="object"?!1:o in f}function te(e,s,f){let o=e;m["dot-notation"]||(s=[s.join(".")]),s.slice(0,-1).forEach(function(O){O=je(O),typeof o=="object"&&o[O]===void 0&&(o[O]={}),typeof o[O]!="object"||Array.isArray(o[O])?(Array.isArray(o[O])?o[O].push({}):o[O]=[o[O],{}],o=o[O][o[O].length-1]):o=o[O]});const n=je(s[s.length-1]),d=b(s.join("."),a.arrays),h=Array.isArray(f);let g=m["duplicate-arguments-array"];!g&&b(n,a.nargs)&&(g=!0,(!B(o[n])&&a.nargs[n]===1||Array.isArray(o[n])&&o[n].length===a.nargs[n])&&(o[n]=void 0)),f===fe()?o[n]=fe(o[n]):Array.isArray(o[n])?g&&d&&h?o[n]=m["flatten-duplicate-arrays"]?o[n].concat(f):(Array.isArray(o[n][0])?o[n]:[o[n]]).concat([f]):!g&&!!d==!!h?o[n]=f:o[n]=o[n].concat([f]):o[n]===void 0&&d?o[n]=h?f:[f]:g&&!(o[n]===void 0||b(n,a.counts)||b(n,a.bools))?o[n]=[o[n],f]:o[n]=f}function vt(...e){e.forEach(function(s){Object.keys(s||{}).forEach(function(f){a.aliases[f]||(a.aliases[f]=[].concat(p[f]||[]),a.aliases[f].concat(f).forEach(function(o){if(/-/.test(o)&&m["camel-case-expansion"]){const n=U(o);n!==f&&a.aliases[f].indexOf(n)===-1&&(a.aliases[f].push(n),se[n]=!0)}}),a.aliases[f].concat(f).forEach(function(o){if(o.length>1&&/[A-Z]/.test(o)&&m["camel-case-expansion"]){const n=we(o,"-");n!==f&&a.aliases[f].indexOf(n)===-1&&(a.aliases[f].push(n),se[n]=!0)}}),a.aliases[f].forEach(function(o){a.aliases[o]=[f].concat(a.aliases[f].filter(function(n){return o!==n}))}))})})}function b(e,s){const f=[].concat(a.aliases[e]||[],e),o=Object.keys(s),n=f.find(d=>o.includes(d));return n?s[n]:!1}function qe(e){const s=Object.keys(a);return[].concat(s.map(o=>a[o])).some(function(o){return Array.isArray(o)?o.includes(e):o[e]})}function Tt(e,...s){return[].concat(...s).some(function(o){const n=e.match(o);return n&&qe(n[1])})}function Bt(e){if(e.match(W)||!e.match(/^-[^-]+/))return!1;let s=!0,f;const o=e.slice(1).split("");for(let n=0;n<o.length;n++){if(f=e.slice(n+2),!qe(o[n])){s=!1;break}if(o[n+1]&&o[n+1]==="="||f==="-"||/[A-Za-z]/.test(o[n])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(f)||o[n+1]&&o[n+1].match(/\W/))break}return s}function le(e){return m["unknown-options-as-args"]&&It(e)}function It(e){return e=e.replace(/^-{3,}/,"--"),e.match(W)||Bt(e)?!1:!Tt(e,/^-+([^=]+?)=[\s\S]*$/,me,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function q(e){return!b(e,a.bools)&&!b(e,a.counts)&&`${e}`in E?E[e]:Pt(zt(e))}function Pt(e){return{[S.BOOLEAN]:!0,[S.STRING]:"",[S.NUMBER]:void 0,[S.ARRAY]:[]}[e]}function zt(e){let s=S.BOOLEAN;return b(e,a.strings)?s=S.STRING:b(e,a.numbers)?s=S.NUMBER:b(e,a.bools)?s=S.BOOLEAN:b(e,a.arrays)&&(s=S.ARRAY),s}function B(e){return e===void 0}function qt(){Object.keys(a.counts).find(e=>b(e,a.arrays)?(L=Error(z("Invalid configuration: %s, opts.count excludes opts.array.",e)),!0):b(e,a.nargs)?(L=Error(z("Invalid configuration: %s, opts.count excludes opts.narg.",e)),!0):!1)}return{aliases:Object.assign({},a.aliases),argv:Object.assign(Be,A),configuration:m,defaulted:Object.assign({},Te),error:L,newAliases:Object.assign({},se)}}}function Ke(i){const t=[],r=Object.create(null);let c=!0;for(Object.keys(i).forEach(function(l){t.push([].concat(i[l],l))});c;){c=!1;for(let l=0;l<t.length;l++)for(let u=l+1;u<t.length;u++)if(t[l].filter(function(m){return t[u].indexOf(m)!==-1}).length){t[l]=t[l].concat(t[u]),t.splice(u,1),c=!0;break}}return t.forEach(function(l){l=l.filter(function(p,m,E){return E.indexOf(p)===m});const u=l.pop();u!==void 0&&typeof u=="string"&&(r[u]=l)}),r}function fe(i){return i!==void 0?i+1:1}function je(i){return i==="__proto__"?"___proto___":i}function Je(i){return typeof i=="string"&&(i[0]==="'"||i[0]==='"')&&i[i.length-1]===i[0]?i.substring(1,i.length-1):i}/**
 * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
 * CJS and ESM environments.
 *
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var ue,he,de;const xe=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,Ce=(he=(ue=process==null?void 0:process.versions)===null||ue===void 0?void 0:ue.node)!==null&&he!==void 0?he:(de=process==null?void 0:process.version)===null||de===void 0?void 0:de.slice(1);if(Ce&&Number(Ce.match(/^([^.]+)/)[1])<xe)throw Error(`yargs parser supports a minimum Node.js version of ${xe}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);const Xe=process?process.env:{},Ne=new He({cwd:process.cwd,env:()=>Xe,format:I.format,normalize:w.normalize,resolve:w.resolve,require:i=>{if(typeof require<"u")return require(i);if(i.match(/\.json$/))return JSON.parse(R.readFileSync(i,"utf8"));throw Error("only .json config files are supported in ESM")}}),D=function(t,r){return Ne.parse(t.slice(),r).argv};D.detailed=function(i,t){return Ne.parse(i.slice(),t)},D.camelCase=U,D.decamelize=we,D.looksLikeNumber=$e;const Ze={right:st,center:rt},ke=0,ne=1,et=2,ie=3;class tt{constructor(t){var r;this.width=t.width,this.wrap=(r=t.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...t){const r=this.div(...t);r.span=!0}resetOutput(){this.rows=[]}div(...t){if(t.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...t)&&typeof t[0]=="string")return this.applyLayoutDSL(t[0]);const r=t.map(c=>typeof c=="string"?this.colFromString(c):c);return this.rows.push(r),r}shouldApplyLayoutDSL(...t){return t.length===1&&typeof t[0]=="string"&&/[\t\n]/.test(t[0])}applyLayoutDSL(t){const r=t.split(`
`).map(l=>l.split("	"));let c=0;return r.forEach(l=>{l.length>1&&j.stringWidth(l[0])>c&&(c=Math.min(Math.floor(this.width*.5),j.stringWidth(l[0])))}),r.forEach(l=>{this.div(...l.map((u,p)=>({text:u.trim(),padding:this.measurePadding(u),width:p===0&&l.length>1?c:void 0})))}),this.rows[this.rows.length-1]}colFromString(t){return{text:t,padding:this.measurePadding(t)}}measurePadding(t){const r=j.stripAnsi(t);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){const t=[];return this.rows.forEach(r=>{this.rowToString(r,t)}),t.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(t,r){return this.rasterize(t).forEach((c,l)=>{let u="";c.forEach((p,m)=>{const{width:E}=t[m],x=this.negatePadding(t[m]);let _=p;if(x>j.stringWidth(p)&&(_+=" ".repeat(x-j.stringWidth(p))),t[m].align&&t[m].align!=="left"&&this.wrap){const P=Ze[t[m].align];_=P(_,x),j.stringWidth(_)<x&&(_+=" ".repeat((E||0)-j.stringWidth(_)-1))}const T=t[m].padding||[0,0,0,0];T[ie]&&(u+=" ".repeat(T[ie])),u+=Se(t[m],_,"| "),u+=_,u+=Se(t[m],_," |"),T[ne]&&(u+=" ".repeat(T[ne])),l===0&&r.length>0&&(u=this.renderInline(u,r[r.length-1]))}),r.push({text:u.replace(/ +$/,""),span:t.span})}),r}renderInline(t,r){const c=t.match(/^ */),l=c?c[0].length:0,u=r.text,p=j.stringWidth(u.trimRight());return r.span?this.wrap?l<p?t:(r.hidden=!0,u.trimRight()+" ".repeat(l-p)+t.trimLeft()):(r.hidden=!0,u+t):t}rasterize(t){const r=[],c=this.columnWidths(t);let l;return t.forEach((u,p)=>{u.width=c[p],this.wrap?l=j.wrap(u.text,this.negatePadding(u),{hard:!0}).split(`
`):l=u.text.split(`
`),u.border&&(l.unshift("."+"-".repeat(this.negatePadding(u)+2)+"."),l.push("'"+"-".repeat(this.negatePadding(u)+2)+"'")),u.padding&&(l.unshift(...new Array(u.padding[ke]||0).fill("")),l.push(...new Array(u.padding[et]||0).fill(""))),l.forEach((m,E)=>{r[E]||r.push([]);const x=r[E];for(let _=0;_<p;_++)x[_]===void 0&&x.push("");x.push(m)})}),r}negatePadding(t){let r=t.width||0;return t.padding&&(r-=(t.padding[ie]||0)+(t.padding[ne]||0)),t.border&&(r-=4),r}columnWidths(t){if(!this.wrap)return t.map(p=>p.width||j.stringWidth(p.text));let r=t.length,c=this.width;const l=t.map(p=>{if(p.width)return r--,c-=p.width,p.width}),u=r?Math.floor(c/r):0;return l.map((p,m)=>p===void 0?Math.max(u,nt(t[m])):p)}}function Se(i,t,r){return i.border?/[.']-+[.']/.test(t)?"":t.trim().length!==0?r:"  ":""}function nt(i){const t=i.padding||[],r=1+(t[ie]||0)+(t[ne]||0);return i.border?r+4:r}function it(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}function st(i,t){i=i.trim();const r=j.stringWidth(i);return r<t?" ".repeat(t-r)+i:i}function rt(i,t){i=i.trim();const r=j.stringWidth(i);return r>=t?i:" ".repeat(t-r>>1)+i}let j;function ot(i,t){return j=t,new tt({width:i?.width||it(),wrap:i?.wrap})}const Fe=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function Le(i){return i.replace(Fe,"")}function ct(i,t){const[r,c]=i.match(Fe)||["",""];i=Le(i);let l="";for(let u=0;u<i.length;u++)u!==0&&u%t===0&&(l+=`
`),l+=i.charAt(u);return r&&c&&(l=`${r}${l}${c}`),l}function at(i){return ot(i,{stringWidth:t=>[...t].length,stripAnsi:Le,wrap:ct})}function lt(i,t){let r=w.resolve(".",i),c;for(R.statSync(r).isDirectory()||(r=w.dirname(r));;){if(c=t(r,R.readdirSync(r)),c)return w.resolve(r,c);if(r=w.dirname(c=r),c===r)break}}const ft={fs:{readFileSync:R.readFileSync,writeFile:R.writeFile},format:I.format,resolve:w.resolve,exists:i=>{try{return R.statSync(i).isFile()}catch{return!1}}};let F;class ut{constructor(t){t=t||{},this.directory=t.directory||"./locales",this.updateFiles=typeof t.updateFiles=="boolean"?t.updateFiles:!0,this.locale=t.locale||"en",this.fallbackToLanguage=typeof t.fallbackToLanguage=="boolean"?t.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...t){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);const r=t.shift();let c=function(){};return typeof t[t.length-1]=="function"&&(c=t.pop()),c=c||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:c})):c(),F.format.apply(F.format,[this.cache[this.locale][r]||r].concat(t))}__n(){const t=Array.prototype.slice.call(arguments),r=t.shift(),c=t.shift(),l=t.shift();let u=function(){};typeof t[t.length-1]=="function"&&(u=t.pop()),this.cache[this.locale]||this._readLocaleFile();let p=l===1?r:c;this.cache[this.locale][r]&&(p=this.cache[this.locale][r][l===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:c},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:u})):u();const m=[p];return~p.indexOf("%d")&&m.push(l),F.format.apply(F.format,m.concat(t))}setLocale(t){this.locale=t}getLocale(){return this.locale}updateLocale(t){this.cache[this.locale]||this._readLocaleFile();for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(this.cache[this.locale][r]=t[r])}_taggedLiteral(t,...r){let c="";return t.forEach(function(l,u){const p=r[u+1];c+=l,typeof p<"u"&&(c+="%s")}),this.__.apply(this,[c].concat([].slice.call(r,1)))}_enqueueWrite(t){this.writeQueue.push(t),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){const t=this,r=this.writeQueue[0],c=r.directory,l=r.locale,u=r.cb,p=this._resolveLocaleFile(c,l),m=JSON.stringify(this.cache[l],null,2);F.fs.writeFile(p,m,"utf-8",function(E){t.writeQueue.shift(),t.writeQueue.length>0&&t._processWriteQueue(),u(E)})}_readLocaleFile(){let t={};const r=this._resolveLocaleFile(this.directory,this.locale);try{F.fs.readFileSync&&(t=JSON.parse(F.fs.readFileSync(r,"utf-8")))}catch(c){if(c instanceof SyntaxError&&(c.message="syntax error in "+r),c.code==="ENOENT")t={};else throw c}this.cache[this.locale]=t}_resolveLocaleFile(t,r){let c=F.resolve(t,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(c)&&~r.lastIndexOf("_")){const l=F.resolve(t,"./",r.split("_")[0]+".json");this._fileExistsSync(l)&&(c=l)}return c}_fileExistsSync(t){return F.exists(t)}}function ht(i,t){F=t;const r=new ut(i);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}const dt=i=>ht(i,ft),pt="require is not supported by ESM",Re="loading a directory of commands is not supported yet for ESM";let G;try{G=Me.fileURLToPath(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:Ae&&Ae.src||new URL("vue-mess-detector.umd.js",document.baseURI).href)}catch{G=process.cwd()}const gt=G.substring(0,G.lastIndexOf("node_modules"));_e.notStrictEqual,_e.strictEqual,I.inspect,gt||process.cwd(),w.basename,w.dirname,w.extname,w.relative,w.resolve,process.cwd,process.exit,process.nextTick,typeof process.stdout.columns<"u"&&process.stdout.columns,R.readFileSync,dt({directory:w.resolve(G,"../../../locales"),updateFiles:!1});const pe="\x1B[44m",Q="\x1B[43m",Y="\x1B[41m",mt="\x1B[42m",C="\x1B[0m",V="\x1B[33m",H="\x1B[0m",ge=50,K=[],bt=(i,t)=>{const r=i.content.split(`
`);r.length>ge&&K.push({fileName:t,scriptLength:r.length})},yt=()=>(K.length>0&&(console.log(`
${Y}Long <script> blocks${C} in ${K.length} files.`),console.log(`ðŸ‘‰ ${V}Try to refactor out the logic into composable functions or other files and keep the script block's length under ${ge} lines.${H}`),K.forEach(i=>{console.log(`- ${i.fileName} ${i.scriptLength>ge*2?Y:Q}(${i.scriptLength} lines)${C}`)})),K.length),J=[],Et=i=>{J.push(i)},_t=()=>(J.length>0&&(console.log(`
${Q}Plain <script> blocks${C} in ${J.length} files.`),console.log(`ðŸ‘‰ ${V} Consider using <script setup> to leverage the new SFC <script> syntax.${H}`),J.forEach(i=>{console.log(`- ${i}`)})),J.length),X=[],At=(i,t)=>{const r=/\belse\b/gi,c=i.content.match(r);c?.length&&X.push({fileName:t,elseCount:c.length})},Ot=()=>(X.length>0&&(console.log(`
${Q}else conditions${C} are used in ${X.length} files.`),console.log(`ðŸ‘‰ ${V}Try to rewrite the conditions in a way that the else clause is not necessary.${H}`),X.forEach(i=>{console.log(`- ${i.fileName} ${Q}(${i.elseCount})${C}`)})),X.length),wt=5,$t=10,Z=[],jt=(i,t)=>{const r=/\bif\b/gi,c=/\belse\b/gi,l=/\bfor\b/gi,u=/\bwhile\b/gi,p=/\bcase\b/gi,m=i.content.match(r),E=i.content.match(c),x=i.content.match(l),_=i.content.match(u),T=i.content.match(p),P=(m?.length||0)+(E?.length||0)+(x?.length||0)+(_?.length||0)+(T?.length||0);P>wt&&Z.push({fileName:t,cyclomaticComplexity:P})},xt=()=>(Z.length>0&&(console.log(`
${pe}cyclomaticComplexity${C} is above moderate in ${Z.length} files.`),console.log(`ðŸ‘‰ ${V}Try to reduce complexity.${H}`),Z.forEach(i=>{console.log(`- ${i.fileName} ${i.cyclomaticComplexity>$t?Y:Q}(${i.cyclomaticComplexity})${C}`)})),Z.length),k=[],Ct=i=>{if(i.includes("pages"))return;const t=w.basename(i);if(t==="App.vue")return;const r=/[A-Z]/;t.slice(1).match(r)?.length||k.push({fileName:i})},Nt=()=>(k.length>0&&(console.log(`
${Y}single name component${C} is used in ${k.length} files.`),console.log(`ðŸ‘‰ ${V}Rename the component.${H} See: https://vuejs.org/style-guide/rules-essential.html#use-multi-word-component-names`),k.forEach(i=>{console.log(`- ${Y}(${i.fileName})${C}`)})),k.length);let We=0;const ve=(i,t)=>{const r=R.readdirSync(i);We+=r.length;for(const c of r){const l=w.join(i,c);R.statSync(l).isDirectory()?ve(l,t):c.endsWith(".vue")&&t(l)}},St=i=>{console.log(`

${pe}Analyzing Vue files in ${i}${C}`);let t=0;ve(i,r=>{const c=R.readFileSync(r,"utf-8"),{descriptor:l}=Ue.parse(c);l.script&&Et(r);const u=l.scriptSetup||l.script;u&&(bt(u,r),At(u,r),jt(u,r),Ct(r))}),console.log(`Found ${pe}${We}${C} Vue files`),t+=yt(),t+=_t(),t+=Ot(),t+=xt(),t+=Nt(),t||console.log(`${mt}No code smells detected!${C}`)};N(Qe(process.argv)).command("analyze [path]","Analyze Vue files for code smells",i=>i.positional("path",{describe:"path to the Vue files",type:"string",default:"./src"}),i=>{St(i.path)}).help().argv});
