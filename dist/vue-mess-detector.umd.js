(function(P,te){typeof exports=="object"&&typeof module<"u"?te(require("yargs"),require("util"),require("path"),require("fs"),require("assert"),require("url"),require("@vue/compiler-sfc")):typeof define=="function"&&define.amd?define(["yargs","util","path","fs","assert","url","@vue/compiler-sfc"],te):(P=typeof globalThis<"u"?globalThis:P||self,te(P.yargs,P.util,P.path,P.fs,P.assert,P.url,P.compilerSfc))})(this,function(P,te,L,k,it,It,Wt){"use strict";var ct=typeof document<"u"?document.currentScript:null;class re extends Error{constructor(t){super(t||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,re)}}function lt(){return Bt()?0:1}function Bt(){return Mt()&&!process.defaultApp}function Mt(){return!!process.versions.electron}function zt(e){return e.slice(lt()+1)}function Pt(){return process.argv[lt()]}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function ie(e){if(e!==e.toLowerCase()&&e!==e.toUpperCase()||(e=e.toLowerCase()),e.indexOf("-")===-1&&e.indexOf("_")===-1)return e;{let n="",o=!1;const c=e.match(/^-+/);for(let a=c?c[0].length:0;a<e.length;a++){let h=e.charAt(a);o&&(o=!1,h=h.toUpperCase()),a!==0&&(h==="-"||h==="_")?o=!0:h!=="-"&&h!=="_"&&(n+=h)}return n}}function at(e,t){const n=e.toLowerCase();t=t||"-";let o="";for(let c=0;c<e.length;c++){const a=n.charAt(c),h=e.charAt(c);a!==h&&c>0?o+=`${t}${n.charAt(c)}`:o+=h}return o}function ut(e){return e==null?!1:typeof e=="number"||/^0x[0-9a-f]+$/i.test(e)?!0:/^0[^.]/.test(e)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */function Ut(e){if(Array.isArray(e))return e.map(h=>typeof h!="string"?h+"":h);e=e.trim();let t=0,n=null,o=null,c=null;const a=[];for(let h=0;h<e.length;h++){if(n=o,o=e.charAt(h),o===" "&&!c){n!==" "&&t++;continue}o===c?c=null:(o==="'"||o==='"')&&!c&&(c=o),a[t]||(a[t]=""),a[t]+=o}return a}/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var U;(function(e){e.BOOLEAN="boolean",e.STRING="string",e.NUMBER="number",e.ARRAY="array"})(U||(U={}));/**
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */let Q;class Vt{constructor(t){Q=t}parse(t,n){const o=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},n),c=Ut(t),a=typeof t=="string",h=qt(Object.assign(Object.create(null),o.alias)),p=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},o.configuration),C=Object.assign(Object.create(null),o.default),O=o.configObjects||[],_=o.envPrefix,T=p["populate--"],G=T?"--":"_",Ve=Object.create(null),Nt=Object.create(null),ne=o.__||Q.format,u={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},K=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,nt=new RegExp("^--"+p["negation-prefix"]+"(.+)");[].concat(o.array||[]).filter(Boolean).forEach(function(s){const i=typeof s=="object"?s.key:s,f=Object.keys(s).map(function(l){return{boolean:"bools",string:"strings",number:"numbers"}[l]}).filter(Boolean).pop();f&&(u[f][i]=!0),u.arrays[i]=!0,u.keys.push(i)}),[].concat(o.boolean||[]).filter(Boolean).forEach(function(s){u.bools[s]=!0,u.keys.push(s)}),[].concat(o.string||[]).filter(Boolean).forEach(function(s){u.strings[s]=!0,u.keys.push(s)}),[].concat(o.number||[]).filter(Boolean).forEach(function(s){u.numbers[s]=!0,u.keys.push(s)}),[].concat(o.count||[]).filter(Boolean).forEach(function(s){u.counts[s]=!0,u.keys.push(s)}),[].concat(o.normalize||[]).filter(Boolean).forEach(function(s){u.normalize[s]=!0,u.keys.push(s)}),typeof o.narg=="object"&&Object.entries(o.narg).forEach(([s,i])=>{typeof i=="number"&&(u.nargs[s]=i,u.keys.push(s))}),typeof o.coerce=="object"&&Object.entries(o.coerce).forEach(([s,i])=>{typeof i=="function"&&(u.coercions[s]=i,u.keys.push(s))}),typeof o.config<"u"&&(Array.isArray(o.config)||typeof o.config=="string"?[].concat(o.config).filter(Boolean).forEach(function(s){u.configs[s]=!0}):typeof o.config=="object"&&Object.entries(o.config).forEach(([s,i])=>{(typeof i=="boolean"||typeof i=="function")&&(u.configs[s]=i)})),Io(o.key,h,o.default,u.arrays),Object.keys(C).forEach(function(s){(u.aliases[s]||[]).forEach(function(i){C[i]=C[s]})});let Z=null;Uo();let qe=[];const F=Object.assign(Object.create(null),{_:[]}),jt={};for(let s=0;s<c.length;s++){const i=c[s],f=i.replace(/^-{3,}/,"---");let l,r,g,d,m,R;if(i!=="--"&&/^-/.test(i)&&ke(i))ot(i);else if(f.match(/^---+(=|$)/)){ot(i);continue}else if(i.match(/^--.+=/)||!p["short-option-groups"]&&i.match(/^-.+=/))d=i.match(/^--?([^=]+)=([\s\S]*)$/),d!==null&&Array.isArray(d)&&d.length>=3&&(E(d[1],u.arrays)?s=Ge(s,d[1],c,d[2]):E(d[1],u.nargs)!==!1?s=De(s,d[1],c,d[2]):S(d[1],d[2],!0));else if(i.match(nt)&&p["boolean-negation"])d=i.match(nt),d!==null&&Array.isArray(d)&&d.length>=2&&(r=d[1],S(r,E(r,u.arrays)?[!1]:!1));else if(i.match(/^--.+/)||!p["short-option-groups"]&&i.match(/^-[^-]+/))d=i.match(/^--?(.+)/),d!==null&&Array.isArray(d)&&d.length>=2&&(r=d[1],E(r,u.arrays)?s=Ge(s,r,c):E(r,u.nargs)!==!1?s=De(s,r,c):(m=c[s+1],m!==void 0&&(!m.match(/^-/)||m.match(K))&&!E(r,u.bools)&&!E(r,u.counts)||/^(true|false)$/.test(m)?(S(r,m),s++):S(r,se(r))));else if(i.match(/^-.\..+=/))d=i.match(/^-([^=]+)=([\s\S]*)$/),d!==null&&Array.isArray(d)&&d.length>=3&&S(d[1],d[2]);else if(i.match(/^-.\..+/)&&!i.match(K))m=c[s+1],d=i.match(/^-(.\..+)/),d!==null&&Array.isArray(d)&&d.length>=2&&(r=d[1],m!==void 0&&!m.match(/^-/)&&!E(r,u.bools)&&!E(r,u.counts)?(S(r,m),s++):S(r,se(r)));else if(i.match(/^-[^-]+/)&&!i.match(K)){g=i.slice(1,-1).split(""),l=!1;for(let I=0;I<g.length;I++){if(m=i.slice(I+2),g[I+1]&&g[I+1]==="="){R=i.slice(I+3),r=g[I],E(r,u.arrays)?s=Ge(s,r,c,R):E(r,u.nargs)!==!1?s=De(s,r,c,R):S(r,R),l=!0;break}if(m==="-"){S(g[I],m);continue}if(/[A-Za-z]/.test(g[I])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(m)&&E(m,u.bools)===!1){S(g[I],m),l=!0;break}if(g[I+1]&&g[I+1].match(/\W/)){S(g[I],m),l=!0;break}else S(g[I],se(g[I]))}r=i.slice(-1)[0],!l&&r!=="-"&&(E(r,u.arrays)?s=Ge(s,r,c):E(r,u.nargs)!==!1?s=De(s,r,c):(m=c[s+1],m!==void 0&&(!/^(-|--)[^-]/.test(m)||m.match(K))&&!E(r,u.bools)&&!E(r,u.counts)||/^(true|false)$/.test(m)?(S(r,m),s++):S(r,se(r))))}else if(i.match(/^-[0-9]$/)&&i.match(K)&&E(i.slice(1),u.bools))r=i.slice(1),S(r,se(r));else if(i==="--"){qe=c.slice(s+1);break}else if(p["halt-at-non-option"]){qe=c.slice(s);break}else ot(i)}Rt(F,!0),Rt(F,!1),Fo(F),Ro(),Lt(F,u.aliases,C,!0),Lo(F),p["set-placeholder-key"]&&To(F),Object.keys(u.counts).forEach(function(s){We(F,s.split("."))||S(s,0)}),T&&qe.length&&(F[G]=[]),qe.forEach(function(s){F[G].push(s)}),p["camel-case-expansion"]&&p["strip-dashed"]&&Object.keys(F).filter(s=>s!=="--"&&s.includes("-")).forEach(s=>{delete F[s]}),p["strip-aliased"]&&[].concat(...Object.keys(h).map(s=>h[s])).forEach(s=>{p["camel-case-expansion"]&&s.includes("-")&&delete F[s.split(".").map(i=>ie(i)).join(".")],delete F[s]});function ot(s){const i=Ze("_",s);(typeof i=="string"||typeof i=="number")&&F._.push(i)}function De(s,i,f,l){let r,g=E(i,u.nargs);if(g=typeof g!="number"||isNaN(g)?1:g,g===0)return H(l)||(Z=Error(ne("Argument unexpected for: %s",i))),S(i,se(i)),s;let d=H(l)?0:1;if(p["nargs-eats-options"])f.length-(s+1)+d<g&&(Z=Error(ne("Not enough arguments following: %s",i))),d=g;else{for(r=s+1;r<f.length&&(!f[r].match(/^-[^0-9]/)||f[r].match(K)||ke(f[r]));r++)d++;d<g&&(Z=Error(ne("Not enough arguments following: %s",i)))}let m=Math.min(d,g);for(!H(l)&&m>0&&(S(i,l),m--),r=s+1;r<m+s+1;r++)S(i,f[r]);return s+m}function Ge(s,i,f,l){let r=[],g=l||f[s+1];const d=E(i,u.nargs);if(E(i,u.bools)&&!/^(true|false)$/.test(g))r.push(!0);else if(H(g)||H(l)&&/^-/.test(g)&&!K.test(g)&&!ke(g)){if(C[i]!==void 0){const m=C[i];r=Array.isArray(m)?m:[m]}}else{H(l)||r.push(st(i,l,!0));for(let m=s+1;m<f.length&&!(!p["greedy-arrays"]&&r.length>0||d&&typeof d=="number"&&r.length>=d||(g=f[m],/^-/.test(g)&&!K.test(g)&&!ke(g)));m++)s=m,r.push(st(i,g,a))}return typeof d=="number"&&(d&&r.length<d||isNaN(d)&&r.length===0)&&(Z=Error(ne("Not enough arguments following: %s",i))),S(i,r),s}function S(s,i,f=a){if(/-/.test(s)&&p["camel-case-expansion"]){const g=s.split(".").map(function(d){return ie(d)}).join(".");Ft(s,g)}const l=st(s,i,f),r=s.split(".");Be(F,r,l),u.aliases[s]&&u.aliases[s].forEach(function(g){const d=g.split(".");Be(F,d,l)}),r.length>1&&p["dot-notation"]&&(u.aliases[r[0]]||[]).forEach(function(g){let d=g.split(".");const m=[].concat(r);m.shift(),d=d.concat(m),(u.aliases[s]||[]).includes(d.join("."))||Be(F,d,l)}),E(s,u.normalize)&&!E(s,u.arrays)&&[s].concat(u.aliases[s]||[]).forEach(function(d){Object.defineProperty(jt,d,{enumerable:!0,get(){return i},set(m){i=typeof m=="string"?Q.normalize(m):m}})})}function Ft(s,i){u.aliases[s]&&u.aliases[s].length||(u.aliases[s]=[i],Ve[i]=!0),u.aliases[i]&&u.aliases[i].length||Ft(i,s)}function st(s,i,f){f&&(i=Dt(i)),(E(s,u.bools)||E(s,u.counts))&&typeof i=="string"&&(i=i==="true");let l=Array.isArray(i)?i.map(function(r){return Ze(s,r)}):Ze(s,i);return E(s,u.counts)&&(H(l)||typeof l=="boolean")&&(l=Ke()),E(s,u.normalize)&&E(s,u.arrays)&&(Array.isArray(i)?l=i.map(r=>Q.normalize(r)):l=Q.normalize(i)),l}function Ze(s,i){return!p["parse-positional-numbers"]&&s==="_"||!E(s,u.strings)&&!E(s,u.bools)&&!Array.isArray(i)&&(ut(i)&&p["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))||!H(i)&&E(s,u.numbers))&&(i=Number(i)),i}function Fo(s){const i=Object.create(null);Lt(i,u.aliases,C),Object.keys(u.configs).forEach(function(f){const l=s[f]||i[f];if(l)try{let r=null;const g=Q.resolve(Q.cwd(),l),d=u.configs[f];if(typeof d=="function"){try{r=d(g)}catch(m){r=m}if(r instanceof Error){Z=r;return}}else r=Q.require(g);rt(r)}catch(r){r.name==="PermissionDenied"?Z=r:s[f]&&(Z=Error(ne("Invalid JSON config file: %s",l)))}})}function rt(s,i){Object.keys(s).forEach(function(f){const l=s[f],r=i?i+"."+f:f;typeof l=="object"&&l!==null&&!Array.isArray(l)&&p["dot-notation"]?rt(l,r):(!We(F,r.split("."))||E(r,u.arrays)&&p["combine-arrays"])&&S(r,l)})}function Ro(){typeof O<"u"&&O.forEach(function(s){rt(s)})}function Rt(s,i){if(typeof _>"u")return;const f=typeof _=="string"?_:"",l=Q.env();Object.keys(l).forEach(function(r){if(f===""||r.lastIndexOf(f,0)===0){const g=r.split("__").map(function(d,m){return m===0&&(d=d.substring(f.length)),ie(d)});(i&&u.configs[g.join(".")]||!i)&&!We(s,g)&&S(g.join("."),l[r])}})}function Lo(s){let i;const f=new Set;Object.keys(s).forEach(function(l){if(!f.has(l)&&(i=E(l,u.coercions),typeof i=="function"))try{const r=Ze(l,i(s[l]));[].concat(u.aliases[l]||[],l).forEach(g=>{f.add(g),s[g]=r})}catch(r){Z=r}})}function To(s){return u.keys.forEach(i=>{~i.indexOf(".")||typeof s[i]>"u"&&(s[i]=void 0)}),s}function Lt(s,i,f,l=!1){Object.keys(f).forEach(function(r){We(s,r.split("."))||(Be(s,r.split("."),f[r]),l&&(Nt[r]=!0),(i[r]||[]).forEach(function(g){We(s,g.split("."))||Be(s,g.split("."),f[r])}))})}function We(s,i){let f=s;p["dot-notation"]||(i=[i.join(".")]),i.slice(0,-1).forEach(function(r){f=f[r]||{}});const l=i[i.length-1];return typeof f!="object"?!1:l in f}function Be(s,i,f){let l=s;p["dot-notation"]||(i=[i.join(".")]),i.slice(0,-1).forEach(function(R){R=ft(R),typeof l=="object"&&l[R]===void 0&&(l[R]={}),typeof l[R]!="object"||Array.isArray(l[R])?(Array.isArray(l[R])?l[R].push({}):l[R]=[l[R],{}],l=l[R][l[R].length-1]):l=l[R]});const r=ft(i[i.length-1]),g=E(i.join("."),u.arrays),d=Array.isArray(f);let m=p["duplicate-arguments-array"];!m&&E(r,u.nargs)&&(m=!0,(!H(l[r])&&u.nargs[r]===1||Array.isArray(l[r])&&l[r].length===u.nargs[r])&&(l[r]=void 0)),f===Ke()?l[r]=Ke(l[r]):Array.isArray(l[r])?m&&g&&d?l[r]=p["flatten-duplicate-arrays"]?l[r].concat(f):(Array.isArray(l[r][0])?l[r]:[l[r]]).concat([f]):!m&&!!g==!!d?l[r]=f:l[r]=l[r].concat([f]):l[r]===void 0&&g?l[r]=d?f:[f]:m&&!(l[r]===void 0||E(r,u.counts)||E(r,u.bools))?l[r]=[l[r],f]:l[r]=f}function Io(...s){s.forEach(function(i){Object.keys(i||{}).forEach(function(f){u.aliases[f]||(u.aliases[f]=[].concat(h[f]||[]),u.aliases[f].concat(f).forEach(function(l){if(/-/.test(l)&&p["camel-case-expansion"]){const r=ie(l);r!==f&&u.aliases[f].indexOf(r)===-1&&(u.aliases[f].push(r),Ve[r]=!0)}}),u.aliases[f].concat(f).forEach(function(l){if(l.length>1&&/[A-Z]/.test(l)&&p["camel-case-expansion"]){const r=at(l,"-");r!==f&&u.aliases[f].indexOf(r)===-1&&(u.aliases[f].push(r),Ve[r]=!0)}}),u.aliases[f].forEach(function(l){u.aliases[l]=[f].concat(u.aliases[f].filter(function(r){return l!==r}))}))})})}function E(s,i){const f=[].concat(u.aliases[s]||[],s),l=Object.keys(i),r=f.find(g=>l.includes(g));return r?i[r]:!1}function Tt(s){const i=Object.keys(u);return[].concat(i.map(l=>u[l])).some(function(l){return Array.isArray(l)?l.includes(s):l[s]})}function Wo(s,...i){return[].concat(...i).some(function(l){const r=s.match(l);return r&&Tt(r[1])})}function Bo(s){if(s.match(K)||!s.match(/^-[^-]+/))return!1;let i=!0,f;const l=s.slice(1).split("");for(let r=0;r<l.length;r++){if(f=s.slice(r+2),!Tt(l[r])){i=!1;break}if(l[r+1]&&l[r+1]==="="||f==="-"||/[A-Za-z]/.test(l[r])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(f)||l[r+1]&&l[r+1].match(/\W/))break}return i}function ke(s){return p["unknown-options-as-args"]&&Mo(s)}function Mo(s){return s=s.replace(/^-{3,}/,"--"),s.match(K)||Bo(s)?!1:!Wo(s,/^-+([^=]+?)=[\s\S]*$/,nt,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function se(s){return!E(s,u.bools)&&!E(s,u.counts)&&`${s}`in C?C[s]:zo(Po(s))}function zo(s){return{[U.BOOLEAN]:!0,[U.STRING]:"",[U.NUMBER]:void 0,[U.ARRAY]:[]}[s]}function Po(s){let i=U.BOOLEAN;return E(s,u.strings)?i=U.STRING:E(s,u.numbers)?i=U.NUMBER:E(s,u.bools)?i=U.BOOLEAN:E(s,u.arrays)&&(i=U.ARRAY),i}function H(s){return s===void 0}function Uo(){Object.keys(u.counts).find(s=>E(s,u.arrays)?(Z=Error(ne("Invalid configuration: %s, opts.count excludes opts.array.",s)),!0):E(s,u.nargs)?(Z=Error(ne("Invalid configuration: %s, opts.count excludes opts.narg.",s)),!0):!1)}return{aliases:Object.assign({},u.aliases),argv:Object.assign(jt,F),configuration:p,defaulted:Object.assign({},Nt),error:Z,newAliases:Object.assign({},Ve)}}}function qt(e){const t=[],n=Object.create(null);let o=!0;for(Object.keys(e).forEach(function(c){t.push([].concat(e[c],c))});o;){o=!1;for(let c=0;c<t.length;c++)for(let a=c+1;a<t.length;a++)if(t[c].filter(function(p){return t[a].indexOf(p)!==-1}).length){t[c]=t[c].concat(t[a]),t.splice(a,1),o=!0;break}}return t.forEach(function(c){c=c.filter(function(h,p,C){return C.indexOf(h)===p});const a=c.pop();a!==void 0&&typeof a=="string"&&(n[a]=c)}),n}function Ke(e){return e!==void 0?e+1:1}function ft(e){return e==="__proto__"?"___proto___":e}function Dt(e){return typeof e=="string"&&(e[0]==="'"||e[0]==='"')&&e[e.length-1]===e[0]?e.substring(1,e.length-1):e}/**
 * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
 * CJS and ESM environments.
 *
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */var Qe,Xe,Ye;const ht=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,dt=(Xe=(Qe=process==null?void 0:process.versions)===null||Qe===void 0?void 0:Qe.node)!==null&&Xe!==void 0?Xe:(Ye=process==null?void 0:process.version)===null||Ye===void 0?void 0:Ye.slice(1);if(dt&&Number(dt.match(/^([^.]+)/)[1])<ht)throw Error(`yargs parser supports a minimum Node.js version of ${ht}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);const Gt=process?process.env:{},pt=new Vt({cwd:process.cwd,env:()=>Gt,format:te.format,normalize:L.normalize,resolve:L.resolve,require:e=>{if(typeof require<"u")return require(e);if(e.match(/\.json$/))return JSON.parse(k.readFileSync(e,"utf8"));throw Error("only .json config files are supported in ESM")}}),ce=function(t,n){return pt.parse(t.slice(),n).argv};ce.detailed=function(e,t){return pt.parse(e.slice(),t)},ce.camelCase=ie,ce.decamelize=at,ce.looksLikeNumber=ut;const Zt={right:Ht,center:Jt},kt=0,Me=1,Kt=2,ze=3;class Qt{constructor(t){var n;this.width=t.width,this.wrap=(n=t.wrap)!==null&&n!==void 0?n:!0,this.rows=[]}span(...t){const n=this.div(...t);n.span=!0}resetOutput(){this.rows=[]}div(...t){if(t.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...t)&&typeof t[0]=="string")return this.applyLayoutDSL(t[0]);const n=t.map(o=>typeof o=="string"?this.colFromString(o):o);return this.rows.push(n),n}shouldApplyLayoutDSL(...t){return t.length===1&&typeof t[0]=="string"&&/[\t\n]/.test(t[0])}applyLayoutDSL(t){const n=t.split(`
`).map(c=>c.split("	"));let o=0;return n.forEach(c=>{c.length>1&&W.stringWidth(c[0])>o&&(o=Math.min(Math.floor(this.width*.5),W.stringWidth(c[0])))}),n.forEach(c=>{this.div(...c.map((a,h)=>({text:a.trim(),padding:this.measurePadding(a),width:h===0&&c.length>1?o:void 0})))}),this.rows[this.rows.length-1]}colFromString(t){return{text:t,padding:this.measurePadding(t)}}measurePadding(t){const n=W.stripAnsi(t);return[0,n.match(/\s*$/)[0].length,0,n.match(/^\s*/)[0].length]}toString(){const t=[];return this.rows.forEach(n=>{this.rowToString(n,t)}),t.filter(n=>!n.hidden).map(n=>n.text).join(`
`)}rowToString(t,n){return this.rasterize(t).forEach((o,c)=>{let a="";o.forEach((h,p)=>{const{width:C}=t[p],O=this.negatePadding(t[p]);let _=h;if(O>W.stringWidth(h)&&(_+=" ".repeat(O-W.stringWidth(h))),t[p].align&&t[p].align!=="left"&&this.wrap){const G=Zt[t[p].align];_=G(_,O),W.stringWidth(_)<O&&(_+=" ".repeat((C||0)-W.stringWidth(_)-1))}const T=t[p].padding||[0,0,0,0];T[ze]&&(a+=" ".repeat(T[ze])),a+=gt(t[p],_,"| "),a+=_,a+=gt(t[p],_," |"),T[Me]&&(a+=" ".repeat(T[Me])),c===0&&n.length>0&&(a=this.renderInline(a,n[n.length-1]))}),n.push({text:a.replace(/ +$/,""),span:t.span})}),n}renderInline(t,n){const o=t.match(/^ */),c=o?o[0].length:0,a=n.text,h=W.stringWidth(a.trimRight());return n.span?this.wrap?c<h?t:(n.hidden=!0,a.trimRight()+" ".repeat(c-h)+t.trimLeft()):(n.hidden=!0,a+t):t}rasterize(t){const n=[],o=this.columnWidths(t);let c;return t.forEach((a,h)=>{a.width=o[h],this.wrap?c=W.wrap(a.text,this.negatePadding(a),{hard:!0}).split(`
`):c=a.text.split(`
`),a.border&&(c.unshift("."+"-".repeat(this.negatePadding(a)+2)+"."),c.push("'"+"-".repeat(this.negatePadding(a)+2)+"'")),a.padding&&(c.unshift(...new Array(a.padding[kt]||0).fill("")),c.push(...new Array(a.padding[Kt]||0).fill(""))),c.forEach((p,C)=>{n[C]||n.push([]);const O=n[C];for(let _=0;_<h;_++)O[_]===void 0&&O.push("");O.push(p)})}),n}negatePadding(t){let n=t.width||0;return t.padding&&(n-=(t.padding[ze]||0)+(t.padding[Me]||0)),t.border&&(n-=4),n}columnWidths(t){if(!this.wrap)return t.map(h=>h.width||W.stringWidth(h.text));let n=t.length,o=this.width;const c=t.map(h=>{if(h.width)return n--,o-=h.width,h.width}),a=n?Math.floor(o/n):0;return c.map((h,p)=>h===void 0?Math.max(a,Xt(t[p])):h)}}function gt(e,t,n){return e.border?/[.']-+[.']/.test(t)?"":t.trim().length!==0?n:"  ":""}function Xt(e){const t=e.padding||[],n=1+(t[ze]||0)+(t[Me]||0);return e.border?n+4:n}function Yt(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}function Ht(e,t){e=e.trim();const n=W.stringWidth(e);return n<t?" ".repeat(t-n)+e:e}function Jt(e,t){e=e.trim();const n=W.stringWidth(e);return n>=t?e:" ".repeat(t-n>>1)+e}let W;function en(e,t){return W=t,new Qt({width:e?.width||Yt(),wrap:e?.wrap})}const mt=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function $t(e){return e.replace(mt,"")}function tn(e,t){const[n,o]=e.match(mt)||["",""];e=$t(e);let c="";for(let a=0;a<e.length;a++)a!==0&&a%t===0&&(c+=`
`),c+=e.charAt(a);return n&&o&&(c=`${n}${c}${o}`),c}function nn(e){return en(e,{stringWidth:t=>[...t].length,stripAnsi:$t,wrap:tn})}function on(e,t){let n=L.resolve(".",e),o;for(k.statSync(n).isDirectory()||(n=L.dirname(n));;){if(o=t(n,k.readdirSync(n)),o)return L.resolve(n,o);if(n=L.dirname(o=n),o===n)break}}const sn={fs:{readFileSync:k.readFileSync,writeFile:k.writeFile},format:te.format,resolve:L.resolve,exists:e=>{try{return k.statSync(e).isFile()}catch{return!1}}};let V;class rn{constructor(t){t=t||{},this.directory=t.directory||"./locales",this.updateFiles=typeof t.updateFiles=="boolean"?t.updateFiles:!0,this.locale=t.locale||"en",this.fallbackToLanguage=typeof t.fallbackToLanguage=="boolean"?t.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...t){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);const n=t.shift();let o=function(){};return typeof t[t.length-1]=="function"&&(o=t.pop()),o=o||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]=n,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o(),V.format.apply(V.format,[this.cache[this.locale][n]||n].concat(t))}__n(){const t=Array.prototype.slice.call(arguments),n=t.shift(),o=t.shift(),c=t.shift();let a=function(){};typeof t[t.length-1]=="function"&&(a=t.pop()),this.cache[this.locale]||this._readLocaleFile();let h=c===1?n:o;this.cache[this.locale][n]&&(h=this.cache[this.locale][n][c===1?"one":"other"]),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]={one:n,other:o},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:a})):a();const p=[h];return~h.indexOf("%d")&&p.push(c),V.format.apply(V.format,p.concat(t))}setLocale(t){this.locale=t}getLocale(){return this.locale}updateLocale(t){this.cache[this.locale]||this._readLocaleFile();for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this.cache[this.locale][n]=t[n])}_taggedLiteral(t,...n){let o="";return t.forEach(function(c,a){const h=n[a+1];o+=c,typeof h<"u"&&(o+="%s")}),this.__.apply(this,[o].concat([].slice.call(n,1)))}_enqueueWrite(t){this.writeQueue.push(t),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){const t=this,n=this.writeQueue[0],o=n.directory,c=n.locale,a=n.cb,h=this._resolveLocaleFile(o,c),p=JSON.stringify(this.cache[c],null,2);V.fs.writeFile(h,p,"utf-8",function(C){t.writeQueue.shift(),t.writeQueue.length>0&&t._processWriteQueue(),a(C)})}_readLocaleFile(){let t={};const n=this._resolveLocaleFile(this.directory,this.locale);try{V.fs.readFileSync&&(t=JSON.parse(V.fs.readFileSync(n,"utf-8")))}catch(o){if(o instanceof SyntaxError&&(o.message="syntax error in "+n),o.code==="ENOENT")t={};else throw o}this.cache[this.locale]=t}_resolveLocaleFile(t,n){let o=V.resolve(t,"./",n+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(o)&&~n.lastIndexOf("_")){const c=V.resolve(t,"./",n.split("_")[0]+".json");this._fileExistsSync(c)&&(o=c)}return o}_fileExistsSync(t){return V.exists(t)}}function cn(e,t){V=t;const n=new rn(e);return{__:n.__.bind(n),__n:n.__n.bind(n),setLocale:n.setLocale.bind(n),getLocale:n.getLocale.bind(n),updateLocale:n.updateLocale.bind(n),locale:n.locale}}const ln=e=>cn(e,sn),an="require is not supported by ESM",yt="loading a directory of commands is not supported yet for ESM";let le;try{le=It.fileURLToPath(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:ct&&ct.src||new URL("vue-mess-detector.umd.js",document.baseURI).href)}catch{le=process.cwd()}const un=le.substring(0,le.lastIndexOf("node_modules"));it.notStrictEqual,it.strictEqual,te.inspect,un||process.cwd(),L.basename,L.dirname,L.extname,L.relative,L.resolve,process.cwd,process.exit,process.nextTick,typeof process.stdout.columns<"u"&&process.stdout.columns,k.readFileSync,ln({directory:L.resolve(le,"../../../locales"),updateFiles:!1});const ae="\x1B[44m",v="\x1B[43m",w="\x1B[41m",fn="\x1B[42m",$="\x1B[0m",A="\x1B[33m",x="\x1B[36m",y="\x1B[0m",ue=Object.keys({"vue-caution":["implicitParentChildCommunication"],"vue-essential":["globalStyle","simpleProp","singleNameComponent","vforNoKey","vifWithVfor"],"vue-recommended":["topLevelElementOrder","elementAttributeOrder"],"vue-strong":["componentFilenameCasing","componentFiles","directiveShorthands","propNameCasing","quotedAttributeValues","selfClosingComponents","simpleComputed","templateSimpleExpression","fullWordComponentName"],rrd:["cyclomaticComplexity","elseCondition","functionSize","parameterCount","plainScript","scriptLenght","shortVariableName","tooManyProps"]}),He=100,fe=[],hn=(e,t)=>{if(!e)return;const n=e.content.split(`
`);n.length>He&&fe.push({fileName:t,scriptLength:n.length})},dn=()=>(fe.length>0&&(console.log(`
${x}rrd${y} ${w}Long <script> blocks${$} in ${fe.length} files.`),console.log(`ðŸ‘‰ ${A}Try to refactor out the logic into composable functions or other files and keep the script block's length under ${He} lines.${y}`),fe.forEach(e=>{console.log(`- ${e.fileName} ${e.scriptLength>He*2?w:v}(${e.scriptLength} lines)${$}`)})),fe.length),he=[],pn=(e,t)=>{!e||!e.setup||he.push(t)},gn=()=>(he.length>0&&(console.log(`
${x}rrd${y} ${v}Plain <script> blocks${$} in ${he.length} files.`),console.log(`ðŸ‘‰ ${A} Consider using <script setup> to leverage the new SFC <script> syntax.${y}`),he.forEach(e=>{console.log(`- ${e}`)})),he.length),mn=/^(\(.*\)|\\?.)$/;function J(e){const t=e.toString();return mn.test(t)?t:`(?:${t})`}const $n=/^(?:\(\?:(.+)\)|(\(?.+\)?))$/,yn=/^(?:\(\?:(.+)\)([?+*]|{[\d,]+})?|(.+))$/;function b(e){const t=n=>b(`(?<${n}>${`${e}`.replace($n,"$1$2")})`);return{toString:()=>e.toString(),and:Object.assign((...n)=>b(`${e}${q(...n)}`),{referenceTo:n=>b(`${e}\\k<${n}>`)}),or:(...n)=>b(`(?:${e}|${q(...n)})`),after:(...n)=>b(`(?<=${q(...n)})${e}`),before:(...n)=>b(`${e}(?=${q(...n)})`),notAfter:(...n)=>b(`(?<!${q(...n)})${e}`),notBefore:(...n)=>b(`${e}(?!${q(...n)})`),times:Object.assign(n=>b(`${J(e)}{${n}}`),{any:()=>b(`${J(e)}*`),atLeast:n=>b(`${J(e)}{${n},}`),atMost:n=>b(`${J(e)}{0,${n}}`),between:(n,o)=>b(`${J(e)}{${n},${o}}`)}),optionally:()=>b(`${J(e)}?`),as:t,groupedAs:t,grouped:()=>b(`${e}`.replace(yn,"($1$3)$2")),at:{lineStart:()=>b(`^${e}`),lineEnd:()=>b(`${e}$`)}}}const bn=/[.*+?^${}()|[\]\\/]/g;function Je(e){return b(`[${e.replace(/[-\\^\]]/g,"\\$&")}]`)}function M(e){return b(`[^${e.replace(/[-\\^\]]/g,"\\$&")}]`)}const En=b(".");b("\\b\\w+\\b");const Pe=b("\\w"),z=b("\\b");b("\\d");const Cn=b("\\s"),de=Object.assign(b("[a-zA-Z]"),{lowercase:b("[a-z]"),uppercase:b("[A-Z]")}),bt=b("\\t"),vn=b("\\n");b("\\r"),b("\\W+"),b("\\W"),b("\\B"),b("\\D"),b("\\S"),Object.assign(b("[^a-zA-Z]"),{lowercase:b("[^a-z]"),uppercase:b("[^A-Z]")}),b("[^\\t]"),b("[^\\n]"),b("[^\\r]");function X(...e){return b(`${J(q(...e))}?`)}function q(...e){return b(e.map(t=>typeof t=="string"?t.replace(bn,"\\$&"):t).join(""))}function N(...e){return b(`${J(q(...e))}+`)}const D="i",B="g",j=(...e)=>{const t=e.length>1&&(Array.isArray(e[e.length-1])||e[e.length-1]instanceof Set)?e.pop():void 0;return new RegExp(q(...e).toString(),[...t||""].join(""))},pe=[],An=(e,t)=>{if(!e)return;const n=j(z,"else",z,[B,D]),o=e.content.match(n);o?.length&&pe.push({fileName:t,elseCount:o.length})},xn=()=>(pe.length>0&&(console.log(`
${x}rrd${y} ${v}else conditions${$} are used in ${pe.length} files.`),console.log(`ðŸ‘‰ ${A}Try to rewrite the conditions in a way that the else clause is not necessary.${y}`),pe.forEach(e=>{console.log(`- ${e.fileName} ${v}(${e.elseCount})${$}`)})),pe.length),_n=5,Sn=10,ge=[],wn=(e,t)=>{if(!e)return;const n=j(z,"if",z,[B,D]),o=j(z,"else",z,[B,D]),c=j(z,"for",z,[B,D]),a=j(z,"while",z,[B,D]),h=j(z,"case",z,[B,D]),p=e.content.match(n),C=e.content.match(o),O=e.content.match(c),_=e.content.match(a),T=e.content.match(h),G=(p?.length||0)+(C?.length||0)+(O?.length||0)+(_?.length||0)+(T?.length||0);G>_n&&ge.push({fileName:t,cyclomaticComplexity:G})},On=()=>(ge.length>0&&(console.log(`
${x}rrd${y} ${ae}cyclomaticComplexity${$} is above moderate in ${ge.length} files.`),console.log(`ðŸ‘‰ ${A}Try to reduce complexity.${y}`),ge.forEach(e=>{console.log(`- ${e.fileName} ${e.cyclomaticComplexity>Sn?w:v}(${e.cyclomaticComplexity})${$}`)})),ge.length),me=[],Nn=e=>{if(e.includes("pages"))return;const t=L.basename(e);if(t==="App.vue")return;const n=j(de.uppercase);t.slice(1).match(n)?.length||me.push({filePath:e})},jn=()=>(me.length>0&&(console.log(`
${x}vue-essential${y} ${w}single name component${$} is used in ${me.length} files.`),console.log(`ðŸ‘‰ ${A}Rename the component to use multi-word name.${y} See: https://vuejs.org/style-guide/rules-essential.html#use-multi-word-component-names`),me.forEach(e=>{console.log(`- ${e.filePath} ðŸš¨`)})),me.length),$e=[],Fn=(e,t)=>{e&&e.forEach(n=>{n.scoped||$e.push({filePath:t})})},Rn=()=>($e.length>0&&(console.log(`
${x}vue-essential${y} ${w}Global style ${$} is used in ${$e.length} files.`),console.log(`ðŸ‘‰ ${A}Use <style scoped>.${y} See: https://vuejs.org/style-guide/rules-essential.html#use-component-scoped-styling`),$e.forEach(e=>{console.log(`- ${e.filePath} ðŸš¨`)})),$e.length),ye=[],Ln=(e,t)=>{if(!e)return;const n=j("defineProps([",[B,D]);e.content.match(n)?.length&&ye.push({filePath:t})},Tn=()=>(ye.length>0&&(console.log(`
${x}vue-essential${y} ${w}simple prop${$} is used in ${ye.length} files.`),console.log(`ðŸ‘‰ ${A}Add at least type definition.${y} See: https://vuejs.org/style-guide/rules-essential.html#use-detailed-prop-definitions`),ye.forEach(e=>{console.log(`- ${e.filePath} ðŸš¨`)})),ye.length),be=[],In=(e,t)=>{if(!e)return;const n=j("<",N(M(">"))," v-if",N(M(">"))," v-for",N(M(">")),">",[B,D]),o=j("<",N(M(">"))," v-for",N(M(">"))," v-if",N(M(">")),">",[B,D]),c=e.content.match(n),a=e.content.match(o);(c?.length||a?.length)&&be.push({filePath:t})},Wn=()=>(be.length>0&&(console.log(`
${x}vue-essential${y} ${w}v-if used with v-for${$} in ${be.length} files.`),console.log(`ðŸ‘‰ ${A}Move out the v-if to a computed property.${y} See: https://vuejs.org/style-guide/rules-essential.html#avoid-v-if-with-v-for`),be.forEach(e=>{console.log(`- ${e.filePath} ðŸš¨`)})),be.length),Ee=[],Bn=(e,t)=>{if(!e)return;const n=j("<",N(M(">"))," v-for",N(M(">")),">",[B,D]),o=e.content.match(n);o?.length&&(o.some(a=>a.includes(":key"))||Ee.push({filePath:t}))},Mn=()=>(Ee.length>0&&(console.log(`
${x}vue-essential${y} ${w}v-for has no key${$} in ${Ee.length} files.`),console.log(`ðŸ‘‰ ${A}Add a \`:key\` property to all v-for.${y} See: https://vuejs.org/style-guide/rules-essential.html#use-keyed-v-for`),Ee.forEach(e=>{console.log(`- ${e.filePath} ðŸš¨`)})),Ee.length),Ce=[],zn=e=>{if(e.includes("pages")||e.includes("layouts"))return;const t=L.basename(e),n=/^[A-Z][a-zA-Z0-9]+(?:(?<!^)(?=[A-Z]))*.vue$/,o=t.match(n),c=/^([a-z0-9]+-)+[a-z0-9]+\.vue$/,a=t.match(c);!o?.length&&!a?.length&&Ce.push({fileName:e})},Pn=()=>(Ce.length>0&&(console.log(`
${x}vue-strong${y} ${w}component name is not PascalCase and not kebab-case${$} in ${Ce.length} files.`),console.log(`ðŸ‘‰ ${A}Rename the component to use PascalCase or kebab-case file name.${y} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#single-file-component-filename-casing`),Ce.forEach(e=>{console.log(`- ${w}${e.fileName}${$}`)})),Ce.length),ve=[],Un=j(N(de.lowercase).at.lineStart(),N(de.uppercase,de.lowercase.times.any().grouped()).at.lineEnd()),Vn=(e,t)=>{if(!e)return;const n=/defineProps\({([^}]+)/g;let o;for(;(o=n.exec(e.content))!==null;)o[1].replace(/\s+/g,"").replace(/["']/g,"").split(",").map(a=>a.split(":")[0]).filter(a=>a.length).filter(a=>!Un.test(a)).length&&ve.push({filePath:t})},qn=()=>(ve.length>0&&(console.log(`
${x}vue-strong${y} ${w}prop names are not camelCased${$} in ${ve.length} files.`),console.log(`ðŸ‘‰ ${A}Rename the props to camelCase.${y} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#prop-name-casing`),ve.forEach(e=>{console.log(`- ${e.filePath} ðŸš¨`)})),ve.length),Y=(e,t)=>{if(!t.includes(`
`))return e.split(`
`).findIndex(h=>h.includes(t))+1;const n=e.indexOf(t),o=e.slice(0,n).split(`
`).length,c=t.split(`
`).length;return o+c-1};function ee(e,t){return new Set(e.map(o=>o[t])).size}const Ae=[],Dn=40,Gn=(e,t)=>{if(!e)return;const n=/{{\s*([\s\S]*?)\s*}}/g;[...e.content.matchAll(n)].map(c=>c[1].trim()).forEach(c=>{if(c.length>Dn){const a=Y(e.content,c),h=c.split(`
`).at(0)?.trim()||"";Ae.push({filename:t,message:`${t}#${a} ${v}${h}${$}`})}})},Zn=()=>{if(Ae.length>0){const e=ee(Ae,"filename");console.log(`
${x}vue-strong${y} ${w}Lengthy template expression${$} found in ${e} files.`),console.log(`ðŸ‘‰ ${A}Refactor the expression into a computed property.${y} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#simple-expressions-in-templates`),Ae.forEach(t=>{console.log(`- ${t.message} ðŸš¨`)})}return Ae.length},xe=[],kn=(e,t)=>{if(!e)return;const n=e.template,o=j("<",N(Pe),X(N(Je(` 	
\r`))),N(M("/>")),X(N(Je(` 	
\r`))),X("/"),">",["g"]),c=n.content.match(o);if(c===null)return;const a=j(":",N(Pe),X(" "),"=",X(" "),M(`'"`),["g"]);c.forEach(h=>{if(!h.includes(":"))return;const p=h.match(a);if(p?.length){const C=Y(e.source,h);xe.push({message:`${t}#${C} ${v}${p}${$}`})}})},Kn=()=>(xe.length>0&&(console.log(`
${x}vue-strong${y} ${w}Attribute value is not quoted${$} in ${xe.length} files.`),console.log(`ðŸ‘‰ ${A}Use quotes for attribute values.${y} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#quoted-attribute-values`),xe.forEach(e=>{console.log(`- ${e.message} ðŸš¨`)})),xe.length),_e=[],Qn=(e,t)=>{if(!e)return;const n=e.template,o=j("<",N(de.uppercase,Pe),X(vn,bt),X(N(M(">"))),"></",N(Pe),">",["g"]),c=n.content.match(o);c!==null&&c.forEach(a=>{const h=Y(e.source,a),p=a.split(`
`).at(-1)?.trim()||"";_e.push({message:`${t}#${h} ${v}${p}${$}`})})},Xn=()=>(_e.length>0&&(console.log(`
${x}vue-strong${y} - ${w}Component is not self closing${$} in ${_e.length} files.`),console.log(`ðŸ‘‰ ${A}Components with no content should be self-closing.${y} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#self-closing-components`),_e.forEach(e=>{console.log(`- ${e.message} ðŸš¨`)})),_e.length),Ue=[],et=[],Yn=["v-slot","v-bind","v-on"],Hn=(e,t)=>{if(!e)return;const n=e.template;Yn.forEach(o=>{if(n.content.includes(`${o}:`)){const c=Y(e.source,o);Ue.push({message:`${t}:${c} ${v}${o}${$}`}),et.some(a=>a.filePath===t)||et.push({filePath:t})}})},Jn=()=>(Ue.length>0&&(console.log(`
${x}vue-strong${y} ${w}Directive shorthands not used${$} in ${et.length} files.`),console.log(`ðŸ‘‰ ${A}Use ":" for v-bind:, "@" for v-on: and "#" for v-slot.${y} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#directive-shorthands`),Ue.forEach(e=>{console.log(`- ${e.message} ðŸš¨`)})),Ue.length),Se=[],eo=3,to=e=>{const t=j(N(M("/")).grouped(),q(".vue").at.lineEnd()),n=e.match(t);if(n){const o=n[0]?.split(".vue")[0],c=j(Je("bcdfghjklmnpqrstvwxyzBCDFGHJKLMNPQRSTVWXYZ"),[B]),a=o.match(c);(!a||a.length<eo)&&Se.push({filename:o,filePath:e})}},no=()=>{if(Se.length>0){const e=ee(Se,"filename");console.log(`
${x}vue-strong${y} ${w}full-word component names${$} detected in ${e} files.`),console.log(`ðŸ‘‰ ${A}Component names should prefer full words over abbreviations.${y} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#full-word-component-names`),Se.forEach(t=>{console.log(`- ${t.filePath} ðŸš¨ ${v}(${t.filename})${$}`)})}return Se.length},we=[],oo=(e,t)=>{const n=e.toString(),o=n.indexOf("<script setup>"),c=n.indexOf("<template>"),a=n.indexOf("<style>"),h=[{name:"script",index:o},{name:"template",index:c},{name:"style",index:a}].filter(C=>C.index!==-1);h.every((C,O)=>O===0?!0:h[O-1].index<C.index)||we.push({filename:t})},so=()=>(we.length>0&&(console.log(`
${x}vue-recommended${y} ${v}SFC top-level element order${$} detected in ${we.length} files.`),console.log(`ðŸ‘‰ ${A}Single-File Components should always order <script>, <template>, and <style> tags consistently.${y} See: https://vuejs.org/style-guide/rules-recommended.html#single-file-component-top-level-element-order`),we.forEach(e=>{console.log(` - ${e.filename} ðŸš¨`)})),we.length),Oe=[],Et=["is","v-for","v-if","v-else-if","v-else","v-show","v-cloak","v-pre","v-once","id","ref","key","v-model","v-on","v-html","v-text"],ro=(e,t)=>{if(!e)return;const n=e.content.replace(/<\/?template>/g,""),o=/<(\w+)(\s[^>]+)?>/g,c=/(\w+(?:-\w+)*)(?:="[^"]*")?/g;let a;for(;(a=o.exec(n))!==null;){const h=a[1],p=a[2];if(p){const O=Array.from(p.matchAll(c),T=>T[1]).filter(T=>Et.includes(T));let _=-1;for(const T of O){const G=Et.indexOf(T);if(G!==-1&&G<_){Oe.push({filename:t,message:`${t} tag has attributes out of order ${v}(${h})${$}`});break}_=G}}}},io=()=>{if(Oe.length>0){const e=ee(Oe,"filename");console.log(`
${x}vue-recommended${y} ${w}element attribute order ${$} detected in ${e} files.`),console.log(`ðŸ‘‰ ${A}The attributes of elements (including components) should be ordered consistently.${y} See: https://vuejs.org/style-guide/rules-recommended.html#element-attribute-order`),Oe.forEach(t=>{console.log(`- ${t.message} ðŸš¨`)})}return Oe.length},Ne=[],co=5,lo=(e,t)=>{if(!e)return;const n=j("defineProps",X("<"),X("("),"{",N(En),"}",["g","s"]),o=e.content.match(n);if(o?.length){const c=o[0].split(",").length;c>co&&Ne.push({fileName:t,propsCount:c})}},ao=()=>(Ne.length>0&&(console.log(`
${x}rrd${y} ${v}too many props${$} are used in ${Ne.length} files.`),console.log(`ðŸ‘‰ ${A}Try to refactor your code to use less properties.${y}`),Ne.forEach(e=>{console.log(`- ${e.fileName} ${v}(${e.propsCount})${$}`)})),Ne.length),je=[],Ct=20,uo=(e,t)=>{if(!e)return;const n=/function\s+([a-zA-Z0-9_$]+)\s*\([^)]*\)\s*{([^{}]*(([^{}]*{[^{}]*}[^{}]*)*[^{}]*))}|const\s+([a-zA-Z0-9_$]+)\s*=\s*\([^)]*\)\s*=>\s*{([^{}]*(([^{}]*{[^{}]*}[^{}]*)*[^{}]*))}/g;let o;for(;(o=n.exec(e.content))!==null;){const c=o[1]||o[5];(o[2]||o[6]).split(`
`).length>Ct&&je.push({filename:t,funcName:c})}},fo=()=>{if(je.length>0){const e=ee(je,"filename");console.log(`
${x}rrd${y} ${v}function size${$} exceeds recommended limit in ${e} files.`),console.log(`ðŸ‘‰ ${A}Functions must be shorter than ${Ct} lines${y}`),je.forEach(t=>{console.log(`- ${t.filename} ðŸš¨ ${v}(${t.funcName})${$}`)})}return je.length},Fe=[],vt=3,At=(e,t,n)=>{const o=t.split(",").map(c=>c.trim()).filter(c=>c.length>0);o.length>vt&&Fe.push({filename:n,funcName:e,paramsCount:o.length})},ho=(e,t)=>{if(!e)return;const n=/function\s+([a-zA-Z0-9_$]+)\s*\(([^)]*)\)\s*{|const\s+([a-zA-Z0-9_$]+)\s*=\s*\(([^)]*)\)\s*=>\s*{/g;let o;for(;(o=n.exec(e.content))!==null;)o[1]?At(o[1],o[2],t):o[3]&&At(o[3],o[4],t)},po=()=>(Fe.length>0&&(console.log(`
${x}rrd${y} ${v}parameter count${$} exceeds recommended limit in ${Fe.length} files.`),console.log(`ðŸ‘‰ ${A}Max number of function parameters should be ${vt}${y}`),Fe.forEach(e=>{console.log(`- ${v}${e.funcName}${$} in file ${e.filename} ðŸš¨ ${v}(${e.paramsCount})${$}`)})),Fe.length),xt=4,Re=[],go=(e,t)=>{if(!e)return;const n=/\b(?:const|var|let)\s+([a-zA-Z_$][a-zA-Z0-9_$]*)/g;let o;for(;(o=n.exec(e.content))!==null;){const c=o[1];c.length<xt&&Re.push({filename:t,variable:c})}},mo=()=>{if(Re.length>0){const e=ee(Re,"filename");console.log(`
${x}rrd${y} ${v}variable names${$} are too short in ${e} files.`),console.log(`ðŸ‘‰ ${A}Variable names must have a minimum length of ${xt}${y}`),Re.forEach(t=>{console.log(`- ${t.filename} ðŸš¨ ${v}(${t.variable})${$}`)})}return Re.length},tt=[],Le=[],$o=5,yo=(e,t)=>{if(!e)return;const n=/const\s+([a-zA-Z0-9_$]+)\s*=\s*computed\(\s*\(\)\s*=>\s*{([^{}]*(?:{[^{}]*}[^{}]*)*)}\s*\)/gs,o=e.content.match(n);o?.length&&o.forEach(c=>{if(c.split(`
`).length>$o){const a=c.split(`
`)[0],h=Y(e.content,a);tt.push({message:`${t}:${h} ${v}computed${$}`}),Le.push({filePath:t}),Le.some(p=>p.filePath===t)||Le.push({filePath:t})}})},bo=()=>(Le.length>0&&(console.log(`
${x}vue-strong${y} ${w}complicated computed property ${$} in ${Le.length} files.`),console.log(`ðŸ‘‰ ${A}Refactor the computed properties to smaller ones.${y} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#simple-computed-properties`),tt.forEach(e=>{console.log(`- ${e.message} ðŸš¨`)})),tt.length),Te=[],Eo=(e,t)=>{if(!e)return;const n=/app\.component\('([^']+)',\s*\{[^}]*\}\)/g;[...e.content.matchAll(n)].map(c=>c[1].trim()).forEach(c=>{const a=Y(e.content.trim(),c),h=c.split(`
`).at(0)?.trim()||"";Te.push({filename:t,message:`${t}#${a} ${v}(${h})${$}`})})},Co=()=>{if(Te.length>0){const e=ee(Te,"filename");console.log(`
${x}vue-strong${y} ${w}component files${$} detected in ${e} files.`),console.log(`ðŸ‘‰ ${A}Whenever a build system is available to concatenate files, each component should be in its own file.${y} See: https://vuejs.org/style-guide/rules-strongly-recommended.html#component-files`),Te.forEach(t=>{console.log(`- ${t.message} ðŸš¨`)})}return Te.length},oe=[],vo=(e,t)=>{if(!e)return;const n=/defineProps\(([^)]+)\)/,o=/v-model\s*=\s*"([^"]+)"/,c=j(q("$parent").or("getCurrentInstance"),[B]),a=e.content.match(n),h=e.content.match(o);if(h){const C=h[1].split(".")[0],O=a?a[1]:"";if(O.includes(C)){const _=Y(e.content.trim(),O);oe.push({filename:t,message:`${t}#${_} ${v}(${C})${$}`})}}const p=e.content.match(c);if(p){const C=Y(e.content.trim(),p[0]);oe.push({filename:t,message:`${t}#${C} ${v}(${p[0]})${$}`})}},Ao=()=>{if(oe.length>0){const e=ee(oe,"filename");console.log(`
${x}vue-caution${y} ${v}implicit parent-child communication${$} detected in ${e} files.`),console.log(`ðŸ‘‰ ${A}Avoid implicit parent-child communication to maintain clear and predictable component behavior.${y} See: https://vuejs.org/style-guide/rules-use-with-caution.html#implicit-parent-child-communication`),oe.forEach(t=>{console.log(`- ${t.message} ðŸš¨`)})}return oe.length},Ie=[],_t=5,xo=3,_o=(e,t)=>{if(!e)return;const n=j(bt.times.atLeast(_t).or(Cn.times.atLeast(xo*_t)),[B,D]);e.content.match(n)?.forEach(c=>{const a=Y(e.content,c);Ie.push({filePath:t,message:`${t}#${a} ${v}indentation: ${c.length}${$}`})})},So=()=>{if(Ie.length>0){const e=ee(Ie,"filePath");console.log(`
${x}rrd${y} ${v}deep indentation${$} found in ${e} files.`),console.log(`ðŸ‘‰ ${A}Try to refactor your component to child components, to avoid deep indentations..${y}`),Ie.forEach(t=>{console.log(`- ${t.message} ðŸš¨`)})}return Ie.length},wo=()=>{let e=0;return e+=jn(),e+=Tn(),e+=Mn(),e+=Wn(),e+=Rn(),e+=Pn(),e+=Xn(),e+=qn(),e+=Zn(),e+=Kn(),e+=Jn(),e+=bo(),e+=Co(),e+=no(),e+=so(),e+=io(),e+=Ao(),e+=On(),e+=So(),e+=xn(),e+=fo(),e+=po(),e+=gn(),e+=dn(),e+=mo(),e+=ao(),e},Oo=(e,t,n)=>{const o=e.scriptSetup||e.script;n.includes("vue-essential")&&(Nn(t),Ln(o,t),Fn(e.styles,t),Bn(e.template,t),In(e.template,t)),n.includes("vue-strong")&&(zn(t),Vn(o,t),Eo(o,t),yo(o,t),Qn(e,t),Gn(e.template,t),kn(e,t),Hn(e,t),to(t)),n.includes("vue-recommended")&&(oo(e.source,t),ro(e.template,t)),n.includes("vue-caution")&&vo(o,t),n.includes("rrd")&&(wn(o,t),_o(o,t),An(o,t),uo(o,t),ho(o,t),pn(e.script,t),hn(o,t),go(o,t),lo(o,t))};let St=0;const No=["src","components","pages","layouts","server","composables","store","utils","plugins","middleware"],wt=(e,t)=>{const n=k.readdirSync(e);St+=n.length;for(const o of n){const c=L.join(e,o);k.statSync(c).isDirectory()?No.some(a=>c.includes(a))&&wt(c,t):o.endsWith(".vue")&&t(c)}},jo=(e,t=[])=>{console.log(`

${ae}Analyzing Vue files in ${e}${$}`);const n=ue.filter(o=>!t.includes(o));console.log(`Applying ${t.length} rules ${ae}${t}${$} and ignoring ${n.length} rules ${ae}${n}${$} rulesets`),wt(e,o=>{if(o.includes("App.vue")||o.includes("app.vue"))return;const c=k.readFileSync(o,"utf-8"),{descriptor:a}=Wt.parse(c);Oo(a,o,t)}),console.log(`Found ${ae}${St}${$} Vue files`),wo()||console.log(`${fn}No code smells detected!${$}`)};P(zt(process.argv)).command("analyze [path]","Analyze Vue files for code smells",e=>e.positional("path",{describe:"path to the Vue files",type:"string",default:"./"}).option("ignore",{describe:"Comma-separated list of rulesets to ignore",type:"string",coerce:Ot("ignore")}).option("apply",{describe:"Comma-separated list of rulesets to apply",type:"string",coerce:Ot("apply")}).check(t=>(t.ignore&&t.apply&&(console.error(`
${w}Cannot use both --ignore and --apply options together.${$}.

`),process.exit(1)),!0)),e=>{let t=[...ue];e.apply&&(t=e.apply),e.ignore&&(t=ue.filter(n=>!e.ignore.includes(n))),jo(e.path,t)}).help().argv;function Ot(e){return t=>{const n=t.split(","),o=n.filter(c=>!ue.includes(c));return o.length>0&&(console.error(`
${w}Invalid ${e} values: ${o.join(", ")}${$}. 
${A}Allowed values are: ${[...ue].join(", ")}${y}

`),process.exit(1)),n}}});
